%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: manual.dvi
%%Pages: 22
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Courier Helvetica Times-Roman Times-Bold Times-Italic
%%+ Courier-Oblique Courier-Bold Times-BoldItalic Symbol
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: dvips -q -t letter -o manual.ps manual.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2000.06.12:1559
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (manual.dvi)
@start /Fa 134[60 4[60 60 2[60 60 60 60 60 5[60 60 3[60
1[60 33[60 15[60 45[{TeXBase1Encoding ReEncodeFont}14
99.6264 /Courier-Bold rf
%DVIPSBitmapFont: Fb cmsy10 9 1
/Fb 1 107 df<12E0B3B3B3B3A3034B77B715>106 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fc cmmi10 10 2
/Fc 2 63 df<EF0380EF0FC0173FEFFF80933803FE00EE0FF8EE3FE0EEFF80DB03FEC7FC
ED0FF8ED3FE0EDFF80DA03FEC8FCEC0FF8EC3FE0ECFF80D903FEC9FCEB0FF8EB3FE0EBFF
80D803FECAFCEA0FF8EA3FE0EA7F8000FECBFCA2EA7F80EA3FE0EA0FF8EA03FEC66C7EEB
3FE0EB0FF8EB03FE903800FF80EC3FE0EC0FF8EC03FE913800FF80ED3FE0ED0FF8ED03FE
923800FF80EE3FE0EE0FF8EE03FE933800FF80EF3FC0170FEF0380323279AD41>60
D<126012FCB4FCEA7FC0EA1FF0EA07FCEA01FF38007FC0EB1FF0EB07FCEB01FF9038007F
C0EC1FF0EC07FCEC01FF9138007FC0ED1FF0ED07FCED01FF9238007FC0EE1FF0EE07FCEE
01FF9338007F80EF1FC0A2EF7F80933801FF00EE07FCEE1FF0EE7FC04B48C7FCED07FCED
1FF0ED7FC04A48C8FCEC07FCEC1FF0EC7FC04948C9FCEB07FCEB1FF0EB7FC04848CAFCEA
07FCEA3FF0EA7FC048CBFC12FC1270323279AD41>62 D E
%EndDVIPSBitmapFont
/Fd 136[55 1[46 23 32 32 1[42 42 46 65 23 42 1[23 46
42 1[37 42 37 1[42 1[42 92[46 2[{TeXBase1Encoding ReEncodeFont}20
83.022 /Times-BoldItalic rf /Fe 134[50 50 50 50 50 50
50 50 50 50 50 50 50 50 2[50 50 50 50 50 50 50 50 50
1[50 8[50 24[50 14[50 50 45[{TeXBase1Encoding ReEncodeFont}28
83.022 /Courier-Bold rf /Ff 134[50 50 72 50 55 33 39
44 55 55 50 55 83 28 55 1[28 55 50 33 44 55 44 55 50
10[72 72 66 55 72 1[61 78 72 94 66 2[39 2[61 66 72 72
66 72 9[50 50 50 50 50 50 50 2[25 33 42[55 2[{
TeXBase1Encoding ReEncodeFont}51 99.6264 /Times-Bold
rf /Fg 134[45 4[45 45 2[45 45 45 45 45 45 1[45 2[45 45
45 45 1[45 50[45 45 45[{TeXBase1Encoding ReEncodeFont}17
74.7198 /Courier-Oblique rf /Fh 130[38 38 38 38 38 38
38 38 38 38 38 38 1[38 38 38 38 38 38 1[38 38 38 38 38
38 38 38 38 1[38 1[38 1[38 4[38 38 38 38 2[38 38 38 38
38 1[38 38 1[38 1[38 38 38 38 38 1[38 38 38 38 38 38
5[38 38 38 38 38 38 38 38 38 1[38 38 38 2[38 3[38 33[{
.85 ExtendFont TeXBase1Encoding ReEncodeFont}67 74.7198
/Courier rf
%DVIPSBitmapFont: Fj cmsy10 10 4
/Fj 4 107 df<EB1FF0EBFFFE487F000714C04814E04814F04814F8A24814FCA3B612FE
A96C14FCA36C14F8A26C14F06C14E06C14C0000114006C5BEB1FF01F1F7BA42A>15
D<EC01F8140FEC3F80ECFC00495A495A495AA2130F5CB3A7131F5C133F49C7FC13FEEA03
F8EA7FE048C8FCEA7FE0EA03F8EA00FE137F6D7E131F80130FB3A7801307A26D7E6D7E6D
7EEC3F80EC0FF814011D537ABD2A>102 D<12FCEAFFC0EA07F0EA01FCEA007E7F80131F
80130FB3A7801307806D7E6D7EEB007EEC1FF0EC07F8EC1FF0EC7E00495A495A495A5C13
0F5CB3A7131F5C133F91C7FC137E485AEA07F0EAFFC000FCC8FC1D537ABD2A>I<126012
F0B3B3B3B3A91260045377BD17>106 D E
%EndDVIPSBitmapFont
/Fk 134[37 37 55 37 42 23 32 32 1[42 42 42 60 23 37 1[23
42 42 23 37 42 37 42 42 6[46 1[51 69 2[46 42 2[51 1[55
69 46 2[28 1[60 3[55 51 18[23 21 28 1[56 3[28 35[42 42
2[{TeXBase1Encoding ReEncodeFont}43 83.022 /Times-Italic
rf /Fl 133[42 42 42 42 42 42 42 42 42 1[42 42 42 42 42
42 42 42 42 42 42 42 42 42 42 42 1[42 1[42 1[42 4[42
42 1[42 4[42 42 42 1[42 42 42 42 1[42 1[42 42 42 2[42
42 42 1[42 10[42 42 42 2[42 6[42 42 34[{
.85 ExtendFont TeXBase1Encoding ReEncodeFont}52 83.022
/Courier rf /Fm 133[37 42 42 60 42 46 28 32 37 46 46
42 46 69 23 46 1[23 46 42 28 37 46 37 46 42 1[42 4[55
3[60 60 55 46 60 65 51 2[78 55 1[42 32 65 1[51 55 1[60
55 60 1[42 1[47 2[28 42 1[42 42 42 42 42 42 42 42 1[21
1[21 47 42 28 28 2[83 34[46 2[{TeXBase1Encoding ReEncodeFont}64
83.022 /Times-Bold rf /Fn 134[60 60 86 60 66 40 47 53
1[66 60 66 1[33 66 1[33 66 60 1[53 66 53 1[60 10[86 86
1[66 2[73 6[47 5[86 11[60 60 60 60 60 60 60 49[{
TeXBase1Encoding ReEncodeFont}33 119.552 /Times-Bold
rf /Fo 133[37 42 42 60 42 42 23 32 28 42 42 42 42 65
23 42 23 23 42 42 28 37 42 37 42 37 3[28 1[28 51 2[78
60 60 51 46 55 60 46 60 60 74 51 1[32 28 60 1[46 51 60
55 55 60 3[47 3[42 42 42 42 42 42 42 42 42 42 23 21 28
21 47 1[28 28 28 4[34 30[46 46 2[{TeXBase1Encoding ReEncodeFont}72
83.022 /Times-Roman rf /Fp 138[86 2[52 3[86 1[34 5[43
86 1[77 1[86 14[112 4[129 77[{TeXBase1Encoding ReEncodeFont}10
154.968 /Helvetica rf /Fq 140[88 4[88 1[88 6[88 88 2[88
25[88 71[{.85 ExtendFont TeXBase1Encoding ReEncodeFont}7
172.188 /Courier rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin
%%BeginPaperSize: Letter
letter
%%EndPaperSize	

%%EndSetup
%%Page: 1 1
1 0 bop 0 193 a Fq(asdlGen)42 b Fp(Ref)-5 b(erence)44
b(Man)n(ual)p 0 306 3900 24 v 0 420 a Fo(Daniel)20 b(C.)h(W)-7
b(ang)2739 b(1.21)19 b(May)h(12,)g(1998)0 1071 y Fn(Contents)0
1314 y Fm(1)83 b(Intr)o(oduction)3281 b(2)0 1553 y(2)83
b(In)m(v)o(ocation)3357 b(3)125 1710 y Fo(2.1)85 b(Common)19
b(Options)46 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143
b(3)125 1866 y(2.2)85 b(Language)19 b(Speci\002c)h(Options)50
b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)143 b(4)0 2106 y Fm(3)83 b(Input)21
b(Syntax)3268 b(5)125 2262 y Fo(3.1)85 b(Le)o(xical)20
b(T)-7 b(ok)o(ens)70 b(.)42 b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143
b(5)125 2418 y(3.2)85 b(Module)20 b(Syntax)65 b(.)42
b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(6)125 2575
y(3.3)85 b(T)-7 b(ype)20 b(De\002nitions)i(.)42 b(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)143 b(6)315 2731 y(3.3.1)98 b(Primiti)n(v)o(e)20
b(T)-7 b(ypes)37 b(.)k(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(7)315
2888 y(3.3.2)98 b(Product)19 b(T)-7 b(ypes)22 b(.)42
b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(7)315 3044 y(3.3.3)98
b(Sum)20 b(T)-7 b(ypes)66 b(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143
b(7)315 3201 y(3.3.4)98 b(Field)21 b(Labels)h(.)41 b(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)143 b(9)315 3357 y(3.3.5)98 b(T)-7 b(ype)20
b(Quali\002ers)48 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)143 b(9)315
3514 y(3.3.6)98 b(Attrib)n(utes)43 b(.)e(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)102 b(10)125 3670 y(3.4)85 b(V)-5 b(ie)n(w)21 b(Syntax)27
b(.)41 b(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102
b(10)315 3827 y(3.4.1)c(Basic)21 b(Syntax)61 b(.)42 b(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)102 b(10)315 3983 y(3.4.2)c(Sugared)19 b(Syntax)36
b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102 b(11)0 4223 y Fm(4)83
b(Using)20 b(the)h(Code)f(Pr)o(oduced)2791 b(12)125 4379
y Fo(4.1)85 b(Memory)19 b(Management)i(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)102 b(12)125 4536 y(4.2)85 b(Cyclic)21 b(Data)g(Structures)e(Ca)n(v)
o(eat)75 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)102 b(12)125 4692 y(4.3)85 b(Constructing)19
b(Data)i(Structures)47 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102 b(12)125
4849 y(4.4)85 b(De-constructing)18 b(Data)j(Structures)66
b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)102 b(13)0 5088 y Fm(5)83 b(V)m(iews)3483
b(14)125 5244 y Fo(5.1)85 b(Interpretation)18 b(of)i(V)-5
b(ie)n(w)21 b(Entry)e(V)-9 b(alues)78 b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102 b(15)125
5401 y(5.2)85 b(Adding)19 b(User)i(Code)78 b(.)41 b(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)102 b(15)p eop
%%Page: 2 2
2 1 bop 0 -167 3900 5 v 0 -200 a Fm(1.)46 b(Intr)o(oduction)3297
b Fo(2)125 162 y(5.3)85 b(Other)20 b(Properties)29 b(.)42
b(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102 b(16)125
318 y(5.4)85 b(Choosing)20 b(a)g(Dif)n(ferent)f(Representation)42
b(.)g(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
102 b(17)315 475 y(5.4.1)c(Examples)45 b(.)c(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)102 b(18)0 714 y Fm(6)83 b(Pickles)3443 b(19)125
871 y Fo(6.1)85 b(User)21 b(V)-5 b(isible)21 b(Interf)o(ace)34
b(.)42 b(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)
f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102 b(19)125 1027
y(6.2)85 b(Pretty)21 b(Printing)e(Pickles)79 b(.)41 b(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g
(.)g(.)102 b(19)125 1184 y(6.3)85 b(Pickle)21 b(F)o(ormat)e(Details)41
b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102 b(20)0 1423 y Fm(7)83
b(Support)20 b(Code)3196 b(21)125 1579 y Fo(7.1)85 b(Required)20
b(for)f(All)i(Languages)e(.)41 b(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)
f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102 b(21)125
1736 y(7.2)85 b(BigNums)72 b(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g
(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)102 b(21)125 1892 y(7.3)85 b(Lists)22
b(and)d(Options)53 b(.)41 b(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f
(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)
h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)102
b(22)125 2049 y(7.4)85 b(Note)21 b(about)e Fl(-mono_types=false)26
b Fo(for)20 b(C)k(.)41 b(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)
g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)g(.)h(.)f(.)g(.)h(.)f(.)g(.)g(.)h
(.)f(.)g(.)g(.)102 b(22)0 2393 y Fn(1)119 b(Intr)n(oduction)0
2635 y Fo(The)28 b Fk(Zephyr)h Fl(<http://www.cs.virgi)q(nia)q(.ed)q
(u/z)q(eph)q(yr>)36 b Fo(Abstract)28 b(Syntax)g(Description)g
(Lanuguage)e(\(ASDL\))i(is)i(a)f(lan-)0 2749 y(guage)18
b(designed)f(to)i(describe)f(the)g(tree-lik)o(e)g(data)h(structures)f
(in)h(compilers.)k(Its)d(main)e(goal)g(is)i(to)f(pro)o(vide)d(a)j
(method)f(for)g(compiler)0 2862 y(components)i(written)i(in)g(dif)n
(ferent)e(languages)h(to)h(interoperate.)29 b(ASDL)22
b(mak)o(es)g(it)h(easier)f(for)f(applications)g(written)h(in)g(a)h(v)n
(ariety)0 2976 y(of)d(programming)d(languages)h(to)j(communicate)d
(comple)o(x)g(recursi)n(v)o(e)h(data)h(structures.)0
3132 y Fl(asdlGen)29 b Fo(is)e(a)f(tool)g(that)g(tak)o(es)h(ASDL)f
(descriptions)f(and)g(produces)g(implementations)f(of)h(those)h
(descriptions)f(in)h(a)h(v)n(ariety)e(of)0 3246 y(popular)18
b(languages.)24 b(ASDL)c(and)g Fl(asdlGen)j Fo(together)c(pro)o(vide)f
(the)i(follo)n(wing)f(adv)n(antages)125 3469 y Fj(\017)41
b Fo(Concise)20 b(descriptions)f(of)h(important)e(data)i(structures.)
125 3649 y Fj(\017)41 b Fo(Automatic)19 b(generation)f(of)i(data)g
(structure)f(implementations)f(for)i(C,)h(C++,)f(Ja)n(v)n(a,)h
(Standard)e(ML,)h(and)f(Hask)o(ell.)125 3829 y Fj(\017)41
b Fo(Automatic)30 b(generation)g(of)h(functions)f(to)i(read)f(and)g
(write)h(the)g(data)f(structures)g(to)h(disk)g(in)g(a)g(machine)e(and)h
(language)208 3943 y(independent)17 b(w)o(ay)-5 b(.)0
4165 y(ASDL)16 b(descriptions)e(describe)h(the)g(tree-lik)o(e)g(data)g
(structures)g(such)g(as)h(abstract)f(syntax)g(trees)h(\(ASTs\))f(and)g
(compiler)f(intermediate)0 4279 y(representations)24
b(\(IRs\).)43 b(T)-7 b(ools)27 b(such)e(as)i Fl(asdlGen)i
Fo(automatically)c(produce)f(the)i(equi)n(v)n(alent)f(data)h(structure)
f(de\002nitions)g(for)h(C,)0 4393 y(C++,)j(Ja)n(v)n(a,)f(Standard)e
(ML,)g(and)g(Hask)o(ell.)45 b Fl(asdlGen)30 b Fo(also)d(produces)e
(functions)g(for)h(each)h(language)e(that)h(read)h(and)f(write)h(the)0
4506 y(data)20 b(structures)g(to)h(and)f(from)g(a)h(platform)e(and)h
(language)e(independent)g(sequence)i(of)g(bytes.)26 b(The)20
b(sequence)g(of)g(bytes)g(is)i(called)e(a)0 4620 y Fk(pic)n(kle)p
Fo(.)0 4776 y(ASDL)k(pickles)g(can)f(be)h(interacti)n(v)o(ely)e(vie)n
(wed)h(and)h(edited)f(with)h(a)g(graphical)e Fk(br)l(owser)j
Fl(<http://www.cs.prin)q(cet)q(on.)q(edu)q(/)0 4890 y(zephyr/browser>)p
Fo(,)g(or)20 b(pretty)f(printed)g(into)g(a)h(simple)g(te)o(xtual)f
(format.)24 b(The)19 b(bro)n(wser)g(pro)o(vides)f(some)i(adv)n(anced)e
(features)h(such)0 5003 y(as)24 b(display)g(styles)g(and)f(tree)h
(based)f(v)o(ersions)g(of)g(standard)g(unix)g(tools)g(such)h(as)g
Fl(diff)i Fo(and)d Fl(grep)p Fo(.)37 b(ASDL)24 b(is)h(part)f(of)f(the)h
(Zephyr)0 5117 y Fk(National)19 b(Compiler)i(Infr)o(astructur)m(e)e
Fl(<http://www.cs.virg)q(ini)q(a.e)q(du/)q(nci)q(>)27
b Fo(project.)p eop
%%Page: 3 3
3 2 bop 0 -167 3900 5 v 0 -200 a Fm(2.)46 b(In)m(v)o(ocation)3373
b Fo(3)0 162 y Fn(2)119 b(In)-5 b(v)o(ocation)208 394
y Fh(asdlGen)38 b(-)p Fg(command)i Fh([)f Fg(command)k(options)37
b Fh(])h(files)h(...)0 634 y Fo(Where)20 b Fk(command)h
Fo(is)g(one)f(of)811 814 y Fl(c)354 b Fo(Output)20 b(ANSI)g(C)811
928 y Fl(sml)270 b Fo(Output)20 b(Standard)f(ML)811 1041
y Fl(haskell)102 b Fo(Output)20 b(Hask)o(ell)811 1155
y Fl(java)228 b Fo(Output)20 b(Ja)n(v)n(a)811 1268 y
Fl(cxx)270 b Fo(Output)20 b(C++)811 1382 y Fl(doc)270
b Fo(Output)20 b Fl(doc)h Fo(directory)e(with)h(HTML)g(descriptions)811
1495 y Fl(typ)270 b Fo(Output)20 b(a)g(machine)f(readable)g(type)h
(description)f(of)h(the)g(inputs)811 1609 y Fl(check)186
b Fo(Check)20 b(correctness)f(of)h(inputs)811 1723 y
Fl(all)270 b Fo(Do)20 b(all)h(of)f(the)g(abo)o(v)o(e)811
1836 y Fl(pp_pkl)144 b Fo(Pretty)20 b(Print)h(an)f(ASDL)g(pickle)g(see)
h(section)f(6)g(\(Pickles\))0 2208 y(The)f Fk(command)g(options)g
Fo(are)g(speci\002c)h(to)g(each)g(command.)j(F)o(or)c(a)h(complete)f
(list)i(of)f(options)e(e)o(xamine)h(the)h(output)e(\002les)j(produced)0
2322 y(by)g(a)i(gi)n(v)o(en)d(command.)28 b(Each)22 b(\002le)g(should)f
(include)g(a)h(comment)f(of)g(all)i(the)f(a)n(v)n(ailable)f(options)g
(and)h(the)f(v)n(alues)h(used)g(to)g(produce)0 2436 y(the)e(output.)0
2592 y Fl(asdlGen)k Fo(reads)d(the)h(set)g(of)f Fl(files)i
Fo(which)e(contain)g(ASDL)g(module)f(declarations)g(and)h(vie)n(w)g
(declarations.)27 b(The)21 b(module)f(decla-)0 2706 y(rations)f(must)g
(be)g(complete)f(and)h(not)f(refer)h(to)g(an)o(y)f(other)h(modules)f
(or)h(types)f(not)h(de\002ned)f(in)i(one)e(of)h(the)g(input)g(\002les.)
25 b(The)19 b(order)f(of)0 2819 y(the)i(input)g(\002les)h(is)g
(unimportant.)h(This)f(closed)f(set)h(of)e(\002les)j(is)f(referred)d
(to)j(as)f(a)h(type)f(en)m(vironment.)0 3116 y Ff(2.1)99
b(Common)25 b(Options)0 3328 y Fo(Options)20 b(common)e(to)i(all)h(the)
f(commands)f(include)0 3551 y Fe(-no_action=)p Fj(f)p
Fe(true)p Fj(j)e Fe(false)p Fj(g)j Fm(or)g Fe(-n)208
3698 y Fo(Do)g(not)g(write)g(an)o(y)f(output)g(\002les.)26
b(Instead)20 b(output)f(the)h(list)h(of)f(\002les)h(that)g(w)o(ould)e
(ha)n(v)o(e)h(been)f(written)h(to)g(standard)f(out.)0
3878 y Fe(-line_width=)p Fd(width)208 4025 y Fo(Set)h(the)h(maximum)d
(line)i(width)g(for)g(pretty)f(printing)g(code.)24 b(The)c(def)o(ault)g
(v)n(alue)f(is)i(72)f(characters.)0 4205 y Fe(-output_directory=)p
Fd(dir)d Fm(or)j Fe(-d)h Fd(dir)208 4352 y Fo(By)i(def)o(ault)g(the)g
(output)f(will)i(be)f(placed)g(in)g(the)g(same)h(directory)d(as)j(the)f
(input)g(\002le)h(from)e(which)g(it)i(w)o(as)g(produced.)32
b(Some)208 4465 y(commands)17 b(lik)o(e)i Fl(-java)i
Fo(will)e(create)f(their)h(o)n(wn)f(subdirectory)e(to)j(place)g(their)f
(output.)23 b(The)c Fl(-output_directory)25 b Fo(option)208
4579 y(o)o(v)o(errides)18 b(the)i(def)o(ault)f(output)g(directory)-5
b(.)0 4759 y Fe(-view=)p Fd(name)19 b Fm(or)h Fe(-V)g
Fd(name)208 4906 y Fo(Sets)c(the)g(def)o(ault)f(vie)n(w)g(to)h
Fl(name)p Fo(.)26 b(The)15 b(def)o(ault)g(vie)n(w)h(name)f(is)h(by)g
(con)m(v)o(ention)c(the)k(command)e(name)h(with)h(the)f(\002rst)i
(character)208 5019 y(capitalized.)24 b(See)c(the)h(section)e(5)i(\(V)
-5 b(ie)n(ws\))20 b(in)g(the)g(user)g(guide)g(for)f(a)i(more)e
(detailed)h(description.)p eop
%%Page: 4 4
4 3 bop 0 -167 3900 5 v 0 -200 a Fm(2.)46 b(In)m(v)o(ocation)3373
b Fo(4)0 162 y Ff(2.2)99 b(Language)26 b(Speci\002c)g(Options)0
374 y Fo(All)k(the)f(commands)e(that)j(produce)d(source)h(code)g(as)i
(output)e(of)n(fer)g(a)i(dif)n(ferent)d(command)g(option)h(to)h(select)
h(the)f(def)o(ault)f(base)0 488 y(en)m(vironment.)50
b(The)29 b(base)g(en)m(vironment)e(is)j(the)g(set)g(of)f(the)h(initial)
f(de\002nitions)g(a)n(v)n(ailable)g(to)h(the)f(code.)52
b(It)30 b(de\002nes)f(the)h(set)g(of)0 601 y(primiti)n(v)o(e)19
b(types)h(and)g(functions)e(used)i(by)g(the)h(generated)d(code.)24
b(F)o(or)c(e)o(xample)f(using)h(the)g(option)f Fl(-base_include=my_ba)q
(se.)q(h)0 715 y Fo(when)h(generating)e(C)j(code)e(will)i(insert)0
937 y Fl(#include)45 b("my_base.h")0 1159 y Fo(in)19
b(the)h(appropriate)d(place)i(so)h(the)f(resulting)f(code)h(will)h(use)
g(the)f(de\002nitions)f(found)g(in)h Fl(my_base.h)k Fo(rather)c(than)g
(the)g(def)o(ault)g(set)h(of)0 1273 y(primiti)n(v)o(e)h(types.)29
b(Unless)23 b(there)e(is)i(a)f(need)f(to)h(globally)f(rede\002ne)f(the)
i(primiti)n(v)o(e)f(types)g(changing)f(the)i(base)g(en)m(vironment)d
(should)0 1386 y(be)h(a)n(v)n(oided.)k(The)c(actual)g(option)f(names)h
(v)n(ary)f(depending)f(on)h(the)i(output)e(language.)0
1543 y(See)i(the)g(section)f(on)g(7)h(\(Support)e(Code\))h(for)g(a)h
(more)e(detailed)h(description)g(about)f(the)i(interf)o(aces)f(to)h
(the)f(def)o(ault)g(set)i(of)e(primiti)n(v)o(e)0 1656
y(types)g(and)g(functions)e(pro)o(vided)g(with)i(the)h(current)e
(release.)0 1895 y Fm(C)208 2091 y Fe(-base_include=)p
Fd(\002le)p Fe(.h)390 2221 y Fo(The)i(def)o(ault)e(v)n(alue)h(is)i
Fl(cii_base.h)p Fo(.)30 b(Name)21 b(of)f(the)h(C)g(header)f(\002le)h
(to)g(include)f(that)g(de\002ne)h(the)f(primiti)n(v)o(e)g(types)g(and)
390 2334 y(functions)f(for)h(all)g(the)h(generated)d(code.)208
2481 y Fe(-mono_types=)p Fj(f)p Fe(true)p Fj(j)f Fe(false)p
Fj(g)390 2611 y Fo(The)31 b(def)o(ault)g(v)n(alue)g(is)h(f)o(alse.)60
b(If)31 b(true)g(e)o(xpand)f(sequence)g(and)h(option)f(types)i(into)f
(ne)n(w)g(distinct)h(types)f(for)g(each)390 2724 y(dif)n(ferent)19
b(quali\002ed)g(type.)208 2871 y Fe(-attribs_default=)p
Fj(f)p Fe(true)p Fj(j)p Fe(false)p Fj(g)390 3001 y Fo(The)27
b(def)o(ault)g(v)n(alue)g(is)h(true.)46 b(Controls)27
b(whether)f(attrib)n(utes)i(\002elds)f(are)h(included)d(in)j(the)f(ar)o
(gument)e(to)j(the)f(def)o(ault)390 3114 y(constructor)f(generated)g
(by)i Fl(asdlGen)j Fo(for)c(sum)h(types.)47 b(If)28 b(true)g(then)f
(attrib)n(utes)h(are)g(include)e(as)j(ar)o(gument)d(to)i(the)390
3228 y(def)o(ault)20 b(constructors.)j(If)d(f)o(alse)h(the)f(attrib)n
(utes)g(are)g(not)g(included)f(in)h(the)g(ar)o(gument)e(for)i(the)g
(constructors.)208 3374 y Fe(-default_only=)p Fj(f)p
Fe(true)p Fj(j)p Fe(false)p Fj(g)390 3504 y Fo(The)26
b(def)o(ault)g(v)n(alue)g(is)h(true.)43 b(Controls)26
b(whether)f(or)h(not)g(to)h(generate)e(tw)o(o)i(constructors)d(for)i
(sum)h(types)f(that)g(ha)n(v)o(e)390 3618 y(attrib)n(utes.)36
b(One)23 b(constructor)f(includes)h(attrib)n(utes)h(as)h(ar)o(guments)c
(the)j(other)f(does)h(not.)35 b(If)24 b(this)g(v)n(alue)f(is)i(f)o
(alse)f(then)390 3731 y(the)18 b Fl(attribs_default)24
b Fo(ar)o(gument)15 b(toggles)j(between)f(whether)g(the)h(def)o(ault)f
(constructor)f(contains)i(attrib)n(utes)f(in)i(the)390
3845 y(ar)o(gument)14 b(or)i(the)h(non-def)o(ault)c(constructor)i
(does.)23 b(The)16 b(def)o(ault)g(constructor)e(is)k(a)e(function)f
(whose)h(name)g(is)h(the)f(same)390 3959 y(as)26 b(the)f(constructor)f
(in)h(the)g(sum)h(type)e(declaration.)39 b(The)25 b(non-def)o(ault)d
(constructor)i(is)i(a)g(function)d(whose)i(name)g(is)390
4072 y(pre\002x)o(ed)c(with)h(either)g Fl(with_attribs)27
b Fo(or)22 b Fl(no_attribs)k Fo(depending)20 b(on)i(the)g(v)n(alue)g
(of)g Fl(-attribs_default)p Fo(.)37 b Fk(This)390 4186
y(functionality)19 b(will)i(pr)l(obably)e(g)o(et)h(mo)o(ved)g(into)g
(the)g(vie)o(w)h(fr)o(ame)o(work)f(r)o(ather)g(than)f(being)g(a)i
(command)d(line)i(switc)o(h.)0 4382 y Fm(C++)208 4578
y Fe(-base_include=)p Fd(\002le)p Fe(.hxx)390 4708 y
Fo(The)25 b(def)o(ault)g(v)n(alue)g(is)h Fl(asdl_base.hxx)p
Fo(.)45 b(Name)25 b(of)h(the)f(C++)h(header)e(\002le)i(to)g(include)e
(that)h(de\002nes)h(the)f(primiti)n(v)o(e)390 4821 y(types)20
b(and)g(functions)f(for)g(all)i(the)f(generated)f(code.)208
4968 y Fe(-simple_sequences=)p Fj(f)p Fe(true)p Fj(j)d
Fe(false)p Fj(g)390 5098 y Fo(The)30 b(def)o(ault)g(v)n(alue)g(is)h
(true.)56 b(Use)31 b(a)g(simple)f(link)o(ed)g(list)h(representation)e
(for)g(sequences.)55 b(Set)31 b(to)g(f)o(alse)g(to)f(use)h(a)390
5211 y(template)20 b(based)g(sequence)f(representation.)k(See)d
Fl(asdl_base.hxx)25 b Fo(for)20 b(a)h(def)o(ault)e(sequence)g(template)
h(e)o(xample.)0 5407 y Fm(J)o(a)n(v)o(a)p eop
%%Page: 5 5
5 4 bop 0 -167 3900 5 v 0 -200 a Fm(3.)46 b(Input)21
b(Syntax)3284 b Fo(5)208 162 y Fe(-base_import=)p Fd(pac)o(kage_spec)
390 292 y Fo(The)28 b(def)o(ault)g(v)n(alue)f(is)i Fl(asdl_base.*)p
Fo(.)54 b(The)27 b(package)g(import)g(speci\002cation)h(to)g(de\002ne)g
(the)g(primiti)n(v)o(e)f(types)h(and)390 405 y(functions)19
b(for)h(all)g(the)h(generated)d(code.)208 552 y Fe(-simple_sequences=)p
Fj(f)p Fe(true)p Fj(j)e Fe(false)p Fj(g)390 682 y Fo(The)34
b(def)o(ault)f(v)n(alue)g(is)h(true.)65 b(Use)35 b(a)f(simple)f(link)o
(ed)g(list)i(representation)d(for)h(sequences.)64 b(Set)35
b(to)e(f)o(alse)h(to)g(use)390 796 y Fl(java.util.Vector)26
b Fo(instead.)0 993 y Fm(Standard)20 b(ML)208 1189 y
Fe(-base_signature=)p Fd(signature_name)390 1319 y Fo(The)k(def)o(ault)
g(v)n(alue)f(is)i Fl(BASE)p Fo(.)h(The)e(signature)f(to)h
Fl(include)k Fo(in)c(all)h(signatures)e(generated)g(that)h(de\002ne)g
(the)g(primiti)n(v)o(e)390 1433 y(types.)208 1580 y Fe
(-base_structure=)p Fd(structure_name)390 1710 y Fo(The)d(def)o(ault)f
(v)n(alue)h(is)h Fl(Base)p Fo(.)30 b(The)20 b(structure)h(to)g
Fl(open)i Fo(in)e(all)h(structures)f(generated)e(that)i(de\002ne)g(the)
g(primiti)n(v)o(e)f(types)390 1823 y(and)g(functions.)0
2020 y Fm(Hask)o(ell)208 2217 y Fe(-base_import=)p Fd(module)390
2347 y Fo(The)j(def)o(ault)g(v)n(alue)f(is)i Fl(HaskellBase)p
Fo(.)39 b(The)23 b(module)f(to)h(import)f(unquali\002ed)g(that)h
(de\002ne)g(the)g(primiti)n(v)o(e)f(types)h(and)390 2460
y(functions)c(for)h(all)g(the)h(generated)d(code.)0 2804
y Fn(3)119 b(Input)31 b(Syntax)0 3047 y Fo(This)26 b(section)f
(describes)h(the)f(syntax)g(of)h(the)g(input)f(language)f(to)h
Fl(asdlGen)p Fo(.)45 b(The)25 b(syntax)g(is)i(described)d(using)i(EBNF)
g(notation.)0 3160 y(Literal)18 b(terminals)g(are)h(enclosed)f(by)g
(double)f(quotes.)23 b(Optional)18 b(terms)h(are)f(enclosed)g(in)g(")p
Fl([])p Fo("')-5 b(s.)26 b(T)-6 b(erms)18 b(which)g(are)h(repeated)e
(zero)0 3274 y(or)23 b(more)f(times)i(are)f(enclosed)f(in)h(")p
Fj(fg)p Fo("')-5 b(s.)34 b(The)23 b(description)f(is)i(brok)o(en)d(up)i
(in)g(smaller)g(subsection.)33 b(Each)23 b(subsection)f(describes)0
3388 y(some)e(fragment)e(of)i(the)h(syntax)e(and)h(its)h(meaning.)0
3684 y Ff(3.1)99 b(Lexical)25 b(T)-9 b(ok)o(ens)1482
3921 y Fk(upper)100 b Fo(=)f(")p Fm(A)p Fo(")21 b Fj(j)g
Fo(...)k Fj(j)20 b Fo(")p Fm(Z)p Fo(")1486 4034 y Fk(lower)102
b Fo(=)d(")p Fm(a)p Fo(")20 b Fj(j)h Fo(...)k Fj(j)c
Fo(")p Fm(z)p Fo(")1488 4148 y Fk(alpha)98 b Fo(=)h(")p
Fm(_)p Fo(")20 b Fj(j)h Fk(upper)g Fj(j)g Fk(lower)1318
4261 y(alpha-num)96 b Fo(=)j Fk(alpha)19 b Fj(j)i Fo(")p
Fm(0)p Fo(")p Fj(j)f Fo(...)25 b Fj(j)c Fo(")p Fm(9)p
Fo(")1481 4375 y Fk(typ-id)101 b Fo(=)e Fk(lower)23 b
Fj(f)p Fk(alpha-num)p Fj(g)1463 4489 y Fk(con-id)100
b Fo(=)f Fk(upper)22 b Fj(f)p Fk(alpha-num)p Fj(g)1610
4602 y Fk(id)102 b Fo(=)d Fk(typ-id)22 b Fj(j)f Fk(con-id)0
4931 y Fo(Notice)k(that)g(identi\002ers)f(for)g(types,)i
Fk(typ-id)r Fo(,)f(are)f(in)h(a)h(dif)n(ferent)d(le)o(xical)h(class)i
(from)e(identi\002ers)g(for)g(constructors)f Fk(con-id)r
Fo(.)38 b(Con-)0 5045 y(structor)18 b(identi\002ers)g(must)g(start)h
(with)f(one)g(uppercase)f(letter)m(,)h(while)h(type)e(identi\002ers)h
(must)h(be)o(gin)e(with)h(one)g(lo)n(wercase)g(letter)-5
b(.)25 b(All)0 5158 y(identi\002ers)c(must)g(be)o(gin)g(with)g(a)h
(letter)-5 b(.)29 b(Comments)21 b(\(not)g(sho)n(w)g(in)g(the)h(abo)o(v)
o(e)d(syntax\))i(be)o(gin)f(with)h(")p Fl(-)p Fo(")h(and)f(continue)f
(to)i(the)f(end)0 5272 y(of)f(the)g(line.)p eop
%%Page: 6 6
6 5 bop 0 -167 3900 5 v 0 -200 a Fm(3.)46 b(Input)21
b(Syntax)3284 b Fo(6)0 162 y Ff(3.2)99 b(Module)26 b(Syntax)1012
417 y Fk(module)98 b Fo(=)h(")p Fm(module)p Fo(")21 b
Fk(id)h Fo([)f Fk(imports)f Fo(]")p Fj(f)p Fo(")g Fk(de\002nitions)e
Fo(")p Fj(g)p Fo(")1002 531 y Fk(imports)100 b Fo(=)f(")p
Fm(\()p Fo(")20 b Fj(f)h Fo(")p Fm(imports)p Fo(")f Fk(id)i
Fj(g)f Fo(")p Fm(\))p Fo(")0 841 y(An)e(ASDL)g(module)e(declaration)g
(consists)j(of)e(the)h(k)o(e)o(yw)o(ord)e(")p Fm(module)p
Fo(")i(follo)n(wed)e(by)i(an)f(identi\002er)m(,)g(an)h(optional)e(set)j
(of)e(imported)0 954 y(modules,)h(and)g(a)i(sequence)e(of)h(type)g
(de\002nitions)f(enclosed)g(in)h(braces.)25 b(F)o(or)20
b(e)o(xample)f(the)h(follo)n(wing)e(e)o(xample)h(declares)h(modules)0
1068 y Fl(A)p Fo(,)g Fl(B)p Fo(,)g(and)f Fl(C)p Fo(.)h
Fl(B)g Fo(imports)f(types)g(from)g Fl(A)p Fo(.)h Fl(C)g
Fo(imports)f(types)g(from)f(both)h Fl(A)h Fo(and)f Fl(B)p
Fo(.)h(Imports)e(cannot)h(be)g(recursi)n(v)o(e.)k(It)d(is)g(an)g(error)
e(for)h Fl(B)0 1181 y Fo(to)h(import)g Fl(C)p Fo(,)g(since)h
Fl(C)g Fo(also)f(imports)g Fl(B)p Fo(.)246 1395 y Fh(module)38
b(A)h({)f(...)g(})246 1499 y(module)g(B)h(\(imports)g(A\))f({)g(...)h
(})246 1603 y(module)f(C)h(\(imports)g(A)627 1707 y(imports)g(B\))f({)g
(...)h(})0 1930 y Fo(T)-7 b(o)23 b(refer)f(to)h(a)h(type)e(imported)g
(from)g(another)f(module)h(the)h(type)f(must)h Fk(always)h
Fo(be)e(quali\002ed)h(by)f(the)h(module)f(name)g(from)g(which)0
2044 y(is)27 b(imported.)43 b(The)26 b(follo)n(wing)f(declares)h(tw)o
(o)h(dif)n(ferent)d(types)j(called)f(")p Fl(t)p Fo(".)45
b(One)26 b(in)h(the)f Fl(A)i Fo(module)d(and)h(one)g(in)g(the)h
Fl(B)g Fo(module.)0 2157 y(The)22 b(type)f(")p Fl(t)p
Fo(")i(in)f(the)g Fl(B)h Fo(module)d(de\002nes)i(a)g(type)g(")p
Fl(t)p Fo(")g(that)g(recursi)n(v)o(ely)f(mentions)f(itself)j(and)e(the)
h(type)g(")p Fl(t)p Fo(")g(imported)f(from)g(the)h Fl(A)0
2271 y Fo(module.)208 2484 y Fh(module)38 b(A)h({)f(t)g(=)g(...)h(})208
2588 y(module)f(B)h(\(imports)f(A\))h({)f(t)g(=)g(T\(A.t,)h(t\))g(|)f
(N)76 b(...)38 b(})0 2885 y Ff(3.3)99 b(T)-7 b(ype)26
b(De\002nitions)1199 3141 y Fk(de\002nitions)97 b Fo(=)j
Fj(f)p Fk(typ-id)21 b Fo(")p Fm(=)p Fo(")g Fk(type)p
Fj(g)1407 3254 y Fk(type)98 b Fo(=)i Fk(sum-type)19 b
Fj(j)i Fk(pr)l(oduct-type)1124 3368 y(pr)l(oduct-type)97
b Fo(=)j Fk(\002elds)1245 3481 y(sum-type)e Fo(=)i Fk(constructor)21
b Fj(f)p Fo(")p Fj(j)p Fo(")f Fk(constructor)r Fj(g)1791
3595 y Fo([")p Fm(attrib)n(utes)p Fo(")f Fk(\002elds)p
Fo(])1160 3708 y Fk(constructor)100 b Fo(=)g Fk(con-id)21
b Fo([)p Fk(\002elds)p Fo(])1370 3822 y Fk(\002elds)98
b Fo(=)i(")p Fm(\()p Fo(")20 b Fj(f)g Fk(\002eld)i Fo(")p
Fm(,)p Fo(")f Fj(g)f Fk(\002eld)i Fo(")p Fm(\))p Fo(")1400
3936 y Fk(\002eld)100 b Fo(=)g([id)20 b(")p Fm(.)p Fo("])p
Fk(typ-id)h Fo([")p Fm(?)p Fo(")p Fj(j)e Fo(")p Fm(*)p
Fo("])h([)p Fk(id)r Fo(])0 4246 y(All)g(type)f(de\002nitions)g(occur)g
(within)g(a)h(module.)k(The)o(y)18 b(be)o(gin)g(with)i(a)g(type)f
(identi\002er)g(which)g(is)i(the)f(name)f(of)g(the)h(type.)k(The)19
b(name)0 4359 y(must)j(be)g(unique)f(within)h(the)g(module.)30
b(The)21 b(order)g(of)h(de\002nitions)f(is)j(unimportant.)k(When)22
b(translating)f(type)h(de\002nitions)f(from)g(a)0 4473
y(module)d(the)o(y)i(are)f(placed)h(in)g(what)f(w)o(ould)h(be)f
(considered)f(a)j(module,)d(package,)g(or)i(name-space)e(of)i(the)g
(same)g(name.)k(If)c(a)g(output)0 4586 y(language)e(does)i(not)f
(support)f(such)i(features)f(and)g(only)g(has)h(one)g(global)f(name)g
(space)g(the)h(module)f(name)g(is)i(used)e(to)h(pre\002x)f(all)i(the)0
4700 y(globally)e(e)o(xported)f(identi\002ers.)0 4856
y(T)-7 b(ype)22 b(de\002nitions)f(are)h(either)f(product)f(types)i
(which)g(are)g(simple)g(record)e(de\002nitions)h(or)h(sum)g(type)g
(which)f(represent)g(a)h(discrimi-)0 4970 y(nated)g(union)g(of)h
(possible)f(v)n(alues.)33 b(Unlik)o(e)23 b(sum)f(types,)i(product)d
(types)i(cannot)e(form)h(recursi)n(v)o(e)g(type)g(de\002nitions,)h(b)n
(ut)g(the)o(y)f(can)0 5084 y(contain)d(recursi)n(v)o(ely)f(declared)h
(sum)i(types.)p eop
%%Page: 7 7
7 6 bop 0 -167 3900 5 v 0 -200 a Fm(3.)46 b(Input)21
b(Syntax)3284 b Fo(7)0 162 y Fm(3.3.1)81 b(Primiti)o(v)o(e)20
b(T)-6 b(ypes)0 374 y Fo(There)21 b(are)h(only)f(three)h(primiti)n(v)o
(e)e(types)i(in)g(ASDL.)g(The)o(y)f(are)h Fl(string)p
Fo(,)j Fl(int)p Fo(,)f(and)d Fl(identifier)p Fo(.)35
b(The)21 b Fl(string)k Fo(type)c(represents)0 488 y(length)j(encoded)f
(strings)i(of)f(bytes.)39 b(The)24 b Fl(int)j Fo(type)d(represents)g
(arbitrary)f(precision)h(signed)g(inte)o(gers.)38 b(The)24
b Fl(identifier)29 b Fo(type)0 601 y(represents)19 b(atomic)h
(printable)f(names,)h(which)f(support)g(f)o(ast)i(equality)e(testing,)h
(analogous)e(to)j(LISP)f(symbols.)0 879 y Fm(3.3.2)81
b(Pr)o(oduct)19 b(T)-6 b(ypes)0 1092 y Fo(Product)21
b(types)i(are)f(record)g(or)g(tuple)g(declarations.)31
b(The)o(y)22 b(consist)g(of)h(a)g(non-empty)d(sequence)h(of)h(\002elds)
h(separated)f(by)g(commas)0 1205 y(enclosed)d(in)i(parenthesis.)j(F)o
(or)19 b(e)o(xample)208 1522 y Fh(pair_of_ints)39 b(=)f(\(int,)h(int\))
0 1744 y Fo(declares)20 b(a)g(ne)n(w)g(type)g Fl(pair_of_ints)25
b Fo(that)20 b(consists)h(of)f(tw)o(o)g(inte)o(gers.)0
2022 y Fm(3.3.3)81 b(Sum)21 b(T)-6 b(ypes)0 2234 y Fo(Sum)19
b(types)f(are)h(the)g(most)g(useful)g(types)f(in)h(ASDL.)g(The)o(y)f
(pro)o(vide)f(concise)i(notation)e(used)i(to)g(describe)f(a)h(type)g
(that)g(is)h(the)f(tagged)0 2348 y(union)24 b(of)h(a)h(\002nite)g(set)g
(of)f(other)g(types.)40 b(Sum)25 b(types)h(consists)f(of)h(a)f(series)h
(of)g(constructors)d(separated)i(by)g(a)h(v)o(ertical)e(bar)-5
b(.)41 b(Each)0 2461 y(constructor)18 b(consist)j(of)f(a)g(constructor)
e(identi\002er)i(follo)n(wed)f(by)h(an)g(optional)f(sequence)g(of)h
(\002elds)g(similar)h(to)f(a)h(product)d(type.)0 2618
y(Constructor)28 b(names)h(must)g(be)g(unique)f(within)h(the)g(module)f
(in)i(which)e(the)o(y)h(are)g(declared.)51 b(Constructors)28
b(can)h(be)g(vie)n(wed)g(as)0 2731 y(functions)18 b(who)g(tak)o(e)h
(some)g(number)e(of)i(ar)o(guments)e(of)h(arbitrary)g(type)g(and)h
(create)f(a)i(v)n(alue)e(belonging)e(to)k(the)f(sum)f(type)h(in)g
(which)0 2845 y(the)o(y)g(are)i(declared.)i(F)o(or)d(e)o(xample)208
3057 y Fh(module)38 b(M)h({)284 3162 y(sexpr)f(=)h(Int\(int\))512
3266 y(|)g(String\(string\))512 3370 y(|)g(Symbol\(identifier\))512
3474 y(|)g(Cons\(sexpr,)g(sexpr\))512 3578 y(|)g(Nil)208
3682 y(})0 3904 y Fo(declares)30 b(that)h(v)n(alues)g(of)f(type)g
Fl(sexpr)j Fo(can)e(either)f(be)h(constructed)e(from)h(an)h
Fl(int)h Fo(using)e(the)h Fl(Int)h Fo(constructor)d(or)i(a)g
Fl(string)0 4018 y Fo(from)24 b(a)i Fl(String)i Fo(constructor)m(,)c
(an)h Fl(identifier)k Fo(using)c(the)g Fl(Symbol)j Fo(constructor)m(,)c
(or)h(from)f(tw)o(o)i(other)e Fl(sexpr)k Fo(using)c(the)i
Fl(Cons)0 4131 y Fo(constructor)m(,)f(or)h(from)f(no)g(ar)o(guments)f
(using)i(the)g Fl(Nil)i Fo(constructor)-5 b(.)41 b(Notice)25
b(that)i(the)f Fl(Cons)i Fo(constructor)c(recursi)n(v)o(ely)g(refers)h
(to)0 4245 y(the)20 b Fl(sexpr)j Fo(type.)i(ASDL)c(allo)n(ws)f(sum)h
(types)f(to)g(be)h(mutually)e(recursi)n(v)o(e.)24 b(Recursion)c(ho)n
(we)n(v)o(er)e(is)j(limited)g(to)f(sum)g(types)h(de\002ned)0
4358 y(within)f(the)g(same)h(module.)0 4636 y Fm(The)31
b(Rosetta)e(Stone)h(f)n(or)g(Sum)h(T)-6 b(ypes)83 b Fo(In)30
b(languages)e(that)j(ha)n(v)o(e)e(algebraic)g(data)h(types)g(sum)g
(types)g(are)g(equi)n(v)n(alent)e(to)j(the)0 4750 y Fl(datatype)24
b Fo(and)c Fl(data)i Fo(declarations)d(in)i(ML)g(and)f(Hask)o(ell.)26
b(In)20 b(Algol)g(lik)o(e)h(languages)e(the)o(y)h(are)g(equi)n(v)n
(alent)f(to)i(tagged)e Fl(unions)k Fo(in)0 4863 y(C)i(or)e(v)n(ariant)g
(records)g(in)h(P)o(ascal.)36 b(In)23 b(class)i(based)e(object)h
(oriented)e(languages)g(sum)i(types)g(are)f(equi)n(v)n(alent)f(to)i(an)
g(abstract)f(base)0 4977 y(class)k(that)g(represents)e(the)h(type)g(of)
g(a)h(f)o(amily)e(of)h(subclasses)h(one)f(for)f(each)h(constructor)f
(of)h(the)g(type.)42 b(The)26 b(pre)n(vious)f(e)o(xample)0
5090 y(written)20 b(in)g(ML)h(w)o(ould)e(be)208 5303
y Fh(structure)39 b(M)f(=)246 5407 y(struct)p eop
%%Page: 8 8
8 7 bop 0 -167 3900 5 v 0 -200 a Fm(3.)46 b(Input)21
b(Syntax)3284 b Fo(8)284 162 y Fh(datatype)39 b(sexpr)f(=)627
266 y(Int)g(of)g(\(int\))551 370 y(|)g(String)g(of)h(\(string\))551
474 y(|)f(Symbol)g(of)h(\(identifier\))551 578 y(|)f(Cons)g(of)h
(\(sexpr)f(*)h(sexpr\))551 682 y(|)f(Nil)246 786 y(end)0
1009 y Fo(in)20 b(C)h(w)o(ould)f(be)208 1223 y Fh(typedef)38
b(struct)h(M_sexpr_s)g(*)f(M_sexpr_ty;)208 1327 y(struct)g(M_sexpr_s)h
({)246 1431 y(enum)f({)g(M_Int_kind,)i(M_String_kind,)512
1535 y(M_Symbol_kind,)g(M_Cons_kind,)f(M_Nil_kind)h(})76
b(kind;)551 1639 y(union)38 b({)589 1743 y(struct)g(M_Int_s)154
b({)38 b(int_ty)77 b(int1;)496 b(})38 b(M_Int;)589 1847
y(struct)g(M_String_s)i({)e(string_ty)h(string1;)306
b(})38 b(M_String;)589 1951 y(struct)g(M_Atom_s)116 b({)38
b(identifier_ty)h(identifier1;})h(M_Atom;)589 2056 y(struct)e(M_Cons_s)
116 b({)38 b(M_sexpr_ty;)h(sexpr1)g(M_sexpr_ty)g(sexpr2)g(};)f(M_Cons;)
551 2160 y(})g(v;)208 2264 y(})0 2487 y Fo(and)20 b(in)g(Ja)n(v)n(a)h
(w)o(ould)e(be)208 2700 y Fh(package)38 b(ast.M;)208
2804 y(public)g(abstract)h(class)g(sexpr)g({)551 2908
y(int)f(kind;)551 3012 y(static)g(final)h(Int_kind)306
b(=)38 b(0;)551 3117 y(static)g(final)h(String_kind)192
b(=)38 b(1;)551 3221 y(static)g(final)h(Symbol_kind)192
b(=)38 b(2;)551 3325 y(static)g(final)h(Cons_kind)268
b(=)38 b(3;)551 3429 y(static)g(final)h(Nil_kind)306
b(=)38 b(4;)551 3533 y(abstract)g(int)h(kind\(\);)208
3637 y(})208 3741 y(public)f(class)h(Int)f(extends)h(sexpr)g({)360
3845 y(int)f(v;)360 3949 y(Int\(int)h(v\))f({)g(this.v)h(=)f(v;)77
b(})360 4053 y(int)38 b(kind)h(\(\))f({)g(return)h(Int_kind;)g(})208
4158 y(})208 4262 y(public)f(class)h(String)g(extends)g(sexpr)f({)g
(String\(string)i(v\))e({)g(...)h(})f(...)h(})208 4366
y(public)f(class)h(Symbol)g(extends)g(sexpr)f({)g(Symbol\(identifier)i
(v\))f({)f(...)g(})h(...)f(})208 4470 y(public)g(class)h(Cons)115
b(extends)39 b(sexpr)f({)g(Cons\(sexpr)i(x,)e(sexpr)h(y\))f({)g(...)h
(})f(})208 4574 y(public)g(class)h(Nil)153 b(extends)39
b(sexpr)f({)g(Nil\(\))h({)f(...)h(})f(})0 4852 y Fm(Sum)21
b(T)-6 b(ypes)20 b(as)h(Enumerations)82 b Fo(Sum)20 b(types)g(which)f
(consist)h(completely)f(of)g(constructors)f(that)i(tak)o(e)g(no)g(ar)o
(guments)e(are)h(often)0 4965 y(treated)h(specially)g(and)f(translated)
h(into)g(static)h(constants)e(of)h(a)h(enumerated)d(v)n(alue)i(in)g
(languages)f(that)h(support)f(them.)208 5179 y Fh(module)38
b(Op)h({)284 5283 y(op)f(=)g(PLUS)h(|)f(MINUS)h(|)f(TIMES)h(|)f(DIVIDE)
208 5387 y(})p eop
%%Page: 9 9
9 8 bop 0 -167 3900 5 v 0 -200 a Fm(3.)46 b(Input)21
b(Syntax)3284 b Fo(9)0 162 y(Is)21 b(translated)e(into)h(the)g
(enumeration)e(and)i(constants)g(in)g(C)h(as)208 363
y Fh(enum)38 b(Op_op_ty)h({Op_PLUS_kind,)h(Op_MINUS_kind,)f
(Op_TIME_kind,)h(Op_DIVIDE_kind};)208 467 y(extern)e(Op_op_ty)h
(Op_PLUS)115 b(=)39 b(Op_PLUS_kind;)208 571 y(extern)f(Op_op_ty)h
(Op_MINUS)77 b(=)39 b(Op_MINUS_kind;)208 675 y(extern)f(Op_op_ty)h
(Op_TIMES)77 b(=)39 b(Op_TIMES_kind;)208 779 y(extern)f(Op_op_ty)h
(Op_DIVIDE)g(=)g(Op_DIVIDE_kind;)0 1055 y Fm(3.3.4)81
b(Field)21 b(Labels)0 1267 y Fo(Field)i(declarations)f(can)g(be)h(as)h
(simple)f(as)g(a)h(single)f(type)f(identi\002er)m(,)g(or)h(the)o(y)f
(can)h(be)g(follo)n(wed)e(with)i(an)g(optional)f(label.)33
b(Labels)0 1381 y(aid)20 b(in)h(the)f(readability)f(of)g(descriptions)g
(and)h(are)g(used)g(by)g Fl(asdlGen)j Fo(to)d(name)g(the)g(\002elds)h
(of)f(records)f(and)g(classes)j(for)d(languages.)0 1494
y(F)o(or)h(e)o(xample)f(the)h(declarations)208 1696 y
Fh(module)38 b(Tree)h({)284 1800 y(tree)f(=)h(Node\(int,)g(tree,)f
(tree\))474 1904 y(|)h(EmptyTree)208 2008 y(})0 2219
y Fo(can)20 b(also)g(be)h(written)f(as)208 2420 y Fh(module)38
b(Tree)h({)284 2524 y(tree)f(=)h(Node\(int)f(value,)h(tree)g(left,)f
(tree)h(right\))474 2628 y(|)g(EmptyTree)208 2732 y(})0
2943 y Fo(When)20 b(translating)f(the)h(\002rst)h(de\002nition)e
(without)h(labels)g(into)g(C)h(one)f(w)o(ould)g(normally)e(get)208
3145 y Fh(...)208 3249 y(struct)38 b(Tree_tree_s)i({)360
3353 y(union)f({)360 3457 y(struct)g({)f(int_ty)h(int1;)f(Tree_tree_ty)
i(tree1;)e(Tree_tree_ty)i(tree2;)f(})f(...)360 3561 y(})g(v)208
3665 y(})208 3769 y(...)0 3980 y Fo(with)20 b(labels)h(one)e(w)o(ould)h
(get)208 4181 y Fh(...)208 4285 y(struct)38 b(Tree_tree_s)i({)360
4389 y(union)f({)360 4494 y(struct)g({)f(int_ty)h(value;)f
(Tree_tree_ty)i(left;)e(Tree_tree_ty)i(right;)f(})f(...)360
4598 y(})g(v)208 4702 y(})208 4806 y(...)0 5081 y Fm(3.3.5)81
b(T)-6 b(ype)21 b(Quali\002ers)0 5294 y Fo(The)26 b(type)f
(identi\002er)h(of)g(a)g(\002eld)g(declaration)f(can)h(also)g(be)g
(quali\002ed)g(with)g(either)g(a)g(sequence)f(\(")p Fm(*)p
Fo("\))g(or)h(option)f(\(")p Fm(?)p Fo("\))g(quali\002er)-5
b(.)0 5407 y(The)19 b(sequence)e(quali\002er)h(is)i(an)f(abbre)n
(viation)d(that)j(stands)g(for)g(a)g(sequence)f(or)g(list)i(of)f(that)g
(gi)n(v)o(en)e(type,)i(while)g(the)g(option)e(quali\002er)p
eop
%%Page: 10 10
10 9 bop 0 -167 3900 5 v 0 -200 a Fm(3.)46 b(Input)21
b(Syntax)3243 b Fo(10)0 162 y(stands)21 b(for)e(a)i(type)f(whose)g(v)n
(alue)g(maybe)g(uninitialized.)k(Sequence)19 b(types)h(are)h(equi)n(v)n
(alent)d(to)j(the)g(lists)g(or)g(arrays)e(of)i(a)f(\002x)o(ed)g(type.)0
275 y(Option)f(types)h(are)g(equi)n(v)n(alent)e(to)j(the)f
Fl(option)i Fo(and)e Fl(Maybe)i Fo(types)e(in)g(ML)g(and)g(Hask)o(ell)g
(or)g(the)g(idiom)f(of)h(a)g(pointer)f(which)h(maybe)0
389 y Fl(NULL)27 b Fo(or)d(contain)g(a)h(v)n(alid)f(address)h(or)f
(object)g(reference)f(in)i(languages)f(lik)o(e)h(C)g(or)g(Ja)n(v)n(a.)
39 b Fl(asdlGen)28 b Fo(pro)o(vides)23 b(v)n(arious)g(dif)n(ferent)0
502 y(translation)f(schemes)g(for)g(handling)e(option)h(and)h(sequence)
g(types)g(in)g(languages)f(that)i(do)f(not)g(ha)n(v)o(e)g(parametric)f
(polymorphism.)0 616 y(See)g(section)f(2)g(\(In)m(v)n(ocation\))d(for)j
(details.)0 892 y Fm(3.3.6)81 b(Attrib)n(utes)0 1105
y Fo(All)23 b(sum)g(types)f(may)g(optionally)f(be)i(follo)n(wed)e(by)h
(a)h(set)h(of)e(attrib)n(utes.)32 b(Attrib)n(utes)23
b(pro)o(vide)d(notation)h(for)h(\002elds)h(common)e(to)i(all)0
1218 y(the)d(constructors)f(in)h(the)g(sum)g(type.)208
1425 y Fh(module)38 b(M)h({)284 1529 y(pos)f(=)g(\(string)h(file,)g
(int)f(linenum,)h(int)g(charpos\))284 1633 y(sexpr)f(=)h(Int\(int\))512
1737 y(|)g(String\(string\))512 1842 y(|)g(Symbol\(identifier\))512
1946 y(|)g(Cons\(sexpr,)g(sexpr\))512 2050 y(|)g(Nil)512
2154 y(attribute\(pos)h(p\))208 2258 y(})0 2474 y Fo(adds)30
b(a)h(\002eld)f(of)g(type)g Fl(pos)h Fo(with)g(label)f
Fl(p)h Fo(to)g(all)f(the)h(constructors)d(in)j Fl(sexpr)p
Fo(.)57 b(Attrib)n(ute)30 b(\002elds)g(are)h(treated)e(specially)h
(when)0 2588 y(translated.)24 b(F)o(or)18 b(e)o(xample)e(in)j(C)g(code)
f(the)g(attrib)n(ute)g(\002eld)g(is)i(hoisted)d(out)h(of)g(the)h
Fl(union)h Fo(and)e(placed)g(in)g(the)g(outer)g Fl(struct)p
Fo(.)27 b(Object)0 2701 y(oriented)19 b(languages)g(\002nd)h(attrib)n
(ute)f(\002elds)i(declared)e(in)h(the)g(abstract)g(base)h(class.)0
2997 y Ff(3.4)99 b(V)l(iew)25 b(Syntax)1207 3249 y Fk(lit-txt)101
b Fo(=)f Fk(see)20 b(discussion)g(below)1238 3362 y(vie)o(w)99
b Fo(=)h(")p Fm(view)p Fo(")19 b Fk(id)k Fo(")p Fj(f)p
Fo(")d Fj(f)p Fk(vie)o(w-entry)p Fj(g)f Fo(")p Fj(g)p
Fo(")1025 3476 y Fk(vie)o(w-entity)99 b Fo(=)h Fk(id)22
b Fo(")p Fm(.)p Fo(")e Fk(typ-id)1500 3589 y Fj(j)112
b Fk(id)22 b Fo(")p Fm(.)p Fo(")e Fk(con-id)1500 3703
y Fj(j)112 b Fo(")p Fm(module)p Fo(")20 b Fk(id)1057
3817 y(vie)o(w-pr)l(op)98 b Fo(=)i(")p Fc(<)p Fm(=)p
Fo(")20 b Fk(id)1039 3930 y(vie)o(w-entry)99 b Fo(=)h
Fk(vie)o(w-entity)19 b(vie)o(w-pr)l(op)h(lit-txt)1500
4044 y Fj(j)112 b Fo(")p Fj(f)p Fo(")20 b Fj(f)p Fk(vie)o(w-entity)p
Fj(g)e Fo(")p Fj(g)p Fo(")p Fk(vie)o(w-pr)l(op)h(lit-txt)1500
4157 y Fj(j)112 b Fk(vie)o(w-pr)l(op)p Fo(")p Fj(f)p
Fo(")18 b Fj(f)p Fk(vie)o(w-entity)i(lit-txt)q Fj(g)g
Fo(")p Fj(g)p Fo(")1500 4271 y Fj(j)112 b Fk(vie)o(w-entity)19
b Fo(")p Fc(<)p Fm(=)p Fo("")p Fj(f)p Fo(")h Fj(f)p Fk(id)i(lit-txt)q
Fj(g)f Fo(")p Fj(g)p Fo(")0 4578 y(V)-5 b(ie)n(ws)31
b(are)f(an)g(e)o(xtensible)f(system)i(of)f(annotating)e(modules,)j
(types,)h(and)e(constructors)f(to)h(aid)g(in)h(the)f(con)m(v)o(ersion)d
(of)j(ASDL)0 4691 y(declarations)g(into)i(a)g(particular)e(output)g
(language.)58 b(This)32 b(discussion)f(will)h(only)f(co)o(v)o(er)f(the)
i(basic)f(vie)n(w)h(syntax.)58 b(Section)31 b(5)0 4805
y(\(V)-5 b(ie)n(ws\))20 b(discusses)h(the)f(meaning)f(of)h(the)g
(annotations)e(in)j(more)e(detail.)0 5081 y Fm(3.4.1)81
b(Basic)21 b(Syntax)0 5294 y Fo(V)-5 b(ie)n(ws)20 b(are)g(named)f(and)g
(consist)h(of)f(series)i(of)e(entries.)25 b(Each)19 b(entry)g
(conceptually)f(be)o(gins)h(with)h(a)g(fully)f(quali\002ed)g(type,)g
(construc-)0 5407 y(tor)m(,)f(or)g(module)f(name.)24
b(F)o(ollo)n(wing)17 b(that)i(name)e(is)j(a)f(k)o(e)o(y)e(v)n(alue)h
(pair)-5 b(.)24 b(The)19 b(meaning)d(of)j(the)f(entry)g(is)h(to)g(add)e
(a)i(particular)e(k)o(e)o(y)h(v)n(alue)p eop
%%Page: 11 11
11 10 bop 0 -167 3900 5 v 0 -200 a Fm(3.)46 b(Input)21
b(Syntax)3243 b Fo(11)0 162 y(pair)19 b(into)g(an)g(internal)f(table)h
(associated)g(with)h(the)f(type,)g(constructor)m(,)e(or)h(module.)24
b(The)19 b(type,)f(constructor)f(or)i(module)f(is)i(referred)0
275 y(to)g(as)h(the)f(vie)n(w)g(entity)g(the)g(k)o(e)o(y)g(is)h
(referred)d(to)i(as)h(the)f(vie)n(w)g(property)-5 b(.)23
b(The)c(v)n(alue)h(is)h(an)f(arbitrary)e(string.)25 b(In)20
b(the)g(grammar)e(abo)o(v)o(e)0 389 y(the)26 b(arbitrary)e(string)h(is)
h(represented)e(with)i(the)g Fk(lit-txt)h Fo(non-terminal.)39
b Fk(lit-txt)27 b Fo(is)g(either)e(a)h(")p Fm(:)p Fo(")g(follo)n(wed)e
(by)h(some)h(arbitrary)e(te)o(xt)0 502 y(that)c(continues)f(to)i(the)f
(end)g(of)g(the)g(line)h(or)f(a)g(")p Fm(\045\045)p Fo(")h(balanced)e
(by)h(a)g(")p Fm(\045\045)p Fo(")h(at)g(the)f(be)o(ginning)e(of)i(a)h
(line)f(by)g(itself.)26 b(T)-6 b(e)o(xt)20 b(include)0
616 y(using)g(the)g(")p Fm(:)p Fo(")g(notation)f(will)i(ha)n(v)o(e)e
(trailing)h(and)g(leading)f(whitespace)g(remo)o(v)o(ed.)k(F)o(or)d(e)o
(xample)208 846 y Fh(view)38 b(Doc)h({)284 950 y(module)77
b(M)38 b(<=)g(doc_string)208 1054 y(\045\045)284 1158
y(Types)g(for)h(representing)g(LISP)g(s-expressions.)208
1262 y(\045\045)284 1367 y(M.sexpr)77 b(<=)38 b(doc_string)h(:)f
(s-expressions)284 1471 y(M.Int)153 b(<=)38 b(doc_string)h(:)f
(s-expression)i(constructor)284 1575 y(M.Symbol)f(<=)f(doc_string)h(:)f
(s-expression)i(constructor)284 1679 y(M.Cons)115 b(<=)38
b(doc_string)h(:)f(s-expression)i(constructor)284 1783
y(M.Nil)153 b(<=)38 b(doc_string)h(:)f(s-expression)i(constructor)208
1887 y(})208 2095 y(view)e(Java)h({)246 2199 y(M.sexpr)g(<=)f
(source_name)h(:)f(Sexpr)246 2304 y(M.sexpr)h(<=)f(base_class)77
b(:)38 b(MyClass)208 2408 y(})0 2647 y Fo(associates)25
b(with)h(the)e(module)g(M)h(the)g(type)g(M.se)o(xpr)e(and)i(the)g
(constructor)e(M.Int)h(strings)h(that)g(will)g(be)g(added)f(to)h(the)g
(automat-)0 2761 y(ically)h(generated)f(documentation)f(produced)g(by)i
(the)g Fl(-doc)j Fo(command)24 b(of)i Fl(asdlGen)p Fo(.)47
b(\()p Fk(In)26 b(futur)m(e)g(we'll)h(pr)l(obably)e(dump)h(them)0
2874 y(in)i(comments)f(in)h(the)g(output)e(code)h(too.)p
Fo(\))47 b(The)27 b(vie)n(w)h(named)e Fl(Java)k Fo(causes)e(the)g(type)
f Fl(M.sexpr)k Fo(to)c(be)h(renamed)e Fl(Sexpr)k Fo(when)0
2988 y(generating)18 b(Ja)n(v)n(a)j(output,)d(and)i(causes)h(the)f
(abstract)g(class)h(normally)d(generated)h(to)h(inherit)g(from)f
Fl(MyClass)p Fo(.)0 3144 y(There)h(can)g(be)h(man)o(y)e(vie)n(ws)i
(with)g(the)g(same)g(name.)k(The)c(entries)f(of)h(tw)o(o)f(vie)n(ws)h
(with)g(the)g(same)g(name)f(are)g(mer)o(ged)f(and)h(consists)0
3258 y(of)g(the)g(union)e(of)i(the)g(entries)f(in)h(both.)k(It)d(is)f
(an)g(error)m(,)e(for)i(tw)o(o)g(vie)n(ws)g(of)g(the)f(same)h(name)g
(to)g(assign)g(dif)n(ferent)e(v)n(alues)h(to)h(the)g(same)0
3371 y(property)e(of)i(an)g(entity)-5 b(.)24 b Fk(Curr)m(ently)d(this)g
(err)l(or)g(isn')n(t)f(c)o(hec)n(k)o(ed)f(for)i(so)f(you)g(r)o(andomly)
f(g)o(et)h(one)g(or)g(the)g(other)-9 b(.)0 3649 y Fm(3.4.2)81
b(Sugar)o(ed)20 b(Syntax)0 3862 y Fo(The)k(abo)o(v)o(e)e(e)o(xample)h
(sho)n(w)h(only)f(the)h(simplest)h(syntax)e(to)h(de\002ne)g(vie)n(w)g
(entry)f(there)h(are)g(three)g(sugared)e(v)o(ersions)h(that)i(remo)o(v)
o(e)0 3975 y(some)f(of)h(the)f(redundanc)o(y)e(of)i(the)h(simple)f
(syntax.)38 b(The)24 b(\002rst)h(sugared)e(v)o(ersion)h(allo)n(ws)h
(the)f(assignment)g(of)g(the)h(same)g(property)0 4089
y(v)n(alue)i(pair)g(to)h(a)g(set)g(of)f(entities.)48
b(The)27 b(ne)o(xt)g(sugared)f(v)o(ersion)g(allo)n(ws)i(assigning)f(to)
g(dif)n(ferent)f(entities)i(dif)n(ferent)e(v)n(alues)h(for)g(a)0
4203 y(\002x)o(ed)e(property)-5 b(.)38 b(The)25 b(\002nal)g(sugared)f
(v)o(ersion)g(allo)n(ws)i(the)f(assignment)g(of)g(dif)n(ferent)f
(property)f(v)n(alue)i(pairs)g(to)h(the)f(same)h(entity)-5
b(.)0 4316 y(Examples)19 b(of)h(the)g(sugared)f(notation)g(are)h(sho)n
(wn)f(belo)n(w)h(in)g(their)g(respecti)n(v)o(e)f(order)-5
b(.)208 4530 y Fh(view)38 b(Doc)h({)246 4634 y({)f(M.Int)77
b(M.Symbol)322 4738 y(M.Cons)39 b(M.Nil)f(})g(<=)h(doc_string)g(:)f
(s-expression)i(constructor)246 4946 y(<=)e(doc_string)h({)284
5050 y(module)77 b(M)208 5154 y(\045\045)284 5258 y(Types)38
b(for)h(representing)g(LISP)g(s-expressions.)208 5362
y(\045\045)p eop
%%Page: 12 12
12 11 bop 0 -167 3900 5 v 0 -200 a Fm(4.)46 b(Using)21
b(the)f(Code)g(Pr)o(oduced)2807 b Fo(12)284 162 y Fh(M.sexpr)39
b(:)f(s-expressions)284 266 y(})208 370 y(})208 578 y(view)g(Java)h({)
246 682 y(M.sexpr)g(<=)f({)322 786 y(source_name)h(:)f(Sexpr)322
890 y(base_class)77 b(:)38 b(MyClass)246 995 y(})208
1099 y(})0 1441 y Fn(4)119 b(Using)31 b(the)f(Code)g(Pr)n(oduced)0
1702 y Ff(4.1)99 b(Memory)25 b(Management)0 1915 y Fo(Currently)h(the)i
(code)e(produced)f(by)i Fl(asdlGen)k Fo(uses)d(the)f(standard)g(memory)
e(management)h(f)o(acilities)i(of)f(the)g(output)g(language.)0
2028 y(Ho)n(we)n(v)o(er)m(,)e Fl(asdlGen)p Fo(,)30 b(assumes)d(a)f
(garbage)e(collect)i(en)m(vironment)d(and)i(does)h(not)g(automatically)
e(pro)o(vided)f(deallocation)i(func-)0 2142 y(tions)k(in)g(languages)f
(without)g(garbage)f(collection.)51 b(F)o(or)28 b(languages)g(lik)o(e)h
(C)h(and)f(C++)h(that)f(do)f(not)h(ha)n(v)o(e)g(garbage)e(collection)0
2256 y(there)18 b(e)o(xist)h(freely)f(a)n(v)n(ailable)g(packages)g
(such)h(as)g(the)g Fk(Boehm-W)-8 b(eiser)18 b(Conservative)h(Collector)
g Fl(<http://reality.sgi.)q(com)q(/)0 2369 y(employees/boehm_mti/)q(gc)
q(.ht)q(ml>)q Fo(.)31 b(Future)17 b(plans)i(are)g(to)f(pro)o(vide)f
(interf)o(aces)h(to)h(allo)n(w)f(for)g(\002ner)h(grain)f(control)f(o)o
(v)o(er)g(aspects)0 2483 y(of)j(allocation)f(and)h(deallocation)e(for)i
(languages)f(without)g(garbage)f(collection.)0 2778 y
Ff(4.2)99 b(Cyclic)25 b(Data)f(Structur)n(es)k(Ca)n(v)o(eat)0
2990 y Fo(The)21 b(code)g(that)g(pickles)g(data)h(assumes)f(that)h(the)
f(data)h(structures)e(are)i(ac)o(yclic.)28 b(If)21 b(a)h(c)o(yclic)f
(data)g(structure)f(is)j(pickled)d(the)h(pickler)0 3104
y(will)28 b(not)f(terminate.)45 b Fl(asdlGen)30 b Fo(does)d(not)g
(enforce)f(this)i(ac)o(yclic)e(property)f(in)j(C,)g(C++,)h(and)e(Ja)n
(v)n(a.)46 b(It)28 b(is)g(the)f(responsibility)f(of)0
3217 y(the)e(programmer)d(to)j(do)f(so.)36 b(The)24 b(lack)f(of)h
(enforcement)d(gi)n(v)o(es)i(the)h(programmer)d(greater)i(\003e)o
(xibility)g(when)g(manipulating)f(data)0 3331 y(structures.)k(In)21
b(future)f(there)g(will)i(be)e(an)h(option)f(to)h(produce)e(code)h
(that)h(enforces)f(ac)o(yclic)g(data)h(structures)f(for)g(those)h(who)f
(w)o(ould)0 3445 y(rather)f(a)n(v)n(oid)h(the)g(dangers)f(associated)h
(with)h(the)f(e)o(xtra)f(\003e)o(xibility)-5 b(.)0 3740
y Ff(4.3)99 b(Constructing)26 b(Data)f(Structur)n(es)0
3952 y Fo(By)19 b(def)o(ault)e(all)i(languages)e(produce)f(constructor)
g(functions)h(for)h(each)g(type)g(mentioned)e(in)i(the)h(descriptions.)
k(F)o(or)18 b(languages)e(that)0 4066 y(support)23 b(o)o(v)o(erloading)
d(\(Ja)n(v)n(a)k(and)g(C++\))g(tw)o(o)g(constructors)e(are)i(produced)e
(for)h(sum)h(type)g(constructors)e(that)i(contain)f(attrib)n(utes.)0
4179 y(One)f(constructor)f(contains)h(attrib)n(ute)g(\002elds)h(the)g
(other)f(omits)g(them.)32 b(In)22 b(languages)f(that)i(do)f(not)g
(support)g(o)o(v)o(erloading)d(attrib)n(ute)0 4293 y(\002elds)j(are)f
(included)f(in)h(the)h(ar)o(guments)d(to)i(the)h(constructor)d
(functions.)27 b(Some)21 b(languages)f(lik)o(e)h(C)h(support)e(dif)n
(ferent)g(options)g(for)0 4406 y(generating)e(constructors.)23
b(\(See)e(2.2)e(\(Language)f(Speci\002c)i(Options\)\))0
4563 y(In)26 b(ML)g(an)g(e)o(xpression)e(to)i(create)g(a)h
Fl(sexpr)h Fo(described)d(in)h(3.3.3)e(\(The)i(Rosetta)g(Stone)g(for)g
(Sum)f(T)-7 b(ypes\))26 b(which)f(represents)h(the)0
4676 y(inte)o(ger)19 b(one)h(w)o(ould)f(look)h(lik)o(e)208
4882 y Fh(M.Int\(1\))0 5097 y Fo(in)g(C)h(it)g(w)o(ould)f(be)208
5407 y Fh(M_Int\(1\))p eop
%%Page: 13 13
13 12 bop 0 -167 3900 5 v 0 -200 a Fm(4.)46 b(Using)21
b(the)f(Code)g(Pr)o(oduced)2807 b Fo(13)0 162 y(and)20
b(in)g(Ja)n(v)n(a)208 364 y Fh(new)38 b(M.Int\(1\))0
576 y Fo(Constructors)15 b(that)h(are)h(that)f(are)g(treated)g
(specially)g(as)g(enumerations)f(3.3.3)f(\(Sum)i(T)-7
b(ypes)16 b(as)h(Enumerations\))d(are)i(globally)f(de\002ned)0
690 y(constant)j(inte)o(gers)f(or)h(objects)g(of)g(the)g(appropriate)e
(name.)24 b(So)18 b(these)h(constructors)e(can)h(be)g("called")g
(without)f(an)o(y)h(ar)o(guments.)k(F)o(or)0 803 y(instance)208
1006 y Fh(Op_PLUS)0 1218 y Fo(rather)d(than)208 1421
y Fh(Op_PLUS\(\))39 b(/*)f(Incorrect)h(use)f(*/)0 1633
y Fo(Because)28 b(Ja)n(v)n(a)f(does)h(not)f(ha)n(v)o(e)g(a)h(name)e
(space)i(where)f(one)g(can)g(place)g(globally)f(visible)i(constants.)46
b(There)27 b(is)h(a)g(special)g(class)0 1746 y(named)19
b Fl(g)i Fo(which)f(contains)f(all)i(constant)f(objects/constructors)d
(for)j(the)g(package.)k(The)19 b(call)i(in)f(Ja)n(v)n(a)h(w)o(ould)e
(be)208 1949 y Fh(import)38 b(ast.*;)208 2053 y(Op.op)g(x)g(=)h
(Op.g.PLUS;)0 2347 y Ff(4.4)99 b(De-constructing)27 b(Data)d(Structur)n
(es)0 2560 y Fo(Here)k(are)g(some)g(common)e(idioms)i(for)g
(De-constructing)d(sum)k(types)f(based)f(on)h(the)g(e)o(xamples)f(in)i
(3.3.3)e(\(The)g(Rosetta)i(Stone)0 2673 y(for)24 b(Sum)g(T)-7
b(ypes\),)25 b(for)f(languages)f(that)i(do)f(not)g(support)f(pattern)h
(matching.)36 b(Languages)23 b(such)h(as)i(ML)e(can)h(simply)f(use)g
(pattern)0 2787 y(matching.)0 2943 y(In)c(C)h(the)f(common)f(idiom)g
(should)g(look)h(something)e(lik)o(e)j(this)246 3146
y Fh(M_sexpr_ty)39 b(sexpr;)284 3250 y(switch\(sexpr->kind\))h({)322
3354 y(case)e(M_Int_kind:)i({)589 3458 y(struct)e(M_Int_s)h(x)f(=)h
(sexpr->v.M_Int;)589 3562 y(/*)f(access)h(the)f(fields)h(through)g(x)f
(*/)322 3666 y(})g(break;)322 3770 y(case)g(M_String_kind:)i({)627
3875 y(struct)e(M_String_s)i(x)e(=)g(sexpr->v.M_String;)589
3979 y(/*)g(access)h(fields)f(through)h(x)g(*/)322 4083
y(})f(break;)322 4187 y(....)322 4291 y(case)g(M_Cons_kind:)i({)627
4395 y(struct)e(M_Cons_s)h(x)g(=)f(sexpr->v.M_Cons;)589
4499 y(/*)g(access)h(the)f(fields)h(through)g(x)f(*/)322
4603 y(})g(break;)246 4812 y(})0 5024 y Fo(This)19 b(approach)e
(introduces)h(an)h(e)o(xtra)f(structure)h(cop)o(y)f(which)h(isn')o(t)f
(necessary)-5 b(,)18 b(b)n(ut)i(has)f(the)g(adv)n(antage)e(of)i
(enforcing)e(a)j(read)e(only)0 5137 y(discipline)i(on)h(the)f(v)n
(alue.)26 b(Alternati)n(v)o(ely)20 b(nothing)f(pre)n(v)o(ents)g(you)h
(from)g(accessing)g(the)h(\002elds)g(directly)f(and)g(mutating)g(them)g
(as)i(or)0 5251 y(making)d Fl(x)i Fo(a)g(pointer)d(to)j(a)f(structure.)
k(A)d(carefully)e(crafted)g(set)i(of)f(macros)g(could)f(mak)o(e)h(this)
g(more)g(readable.)0 5407 y(In)g(Ja)n(v)n(a)g(the)h(idiom)e(is)i(much)f
(the)g(same)p eop
%%Page: 14 14
14 13 bop 0 -167 3900 5 v 0 -200 a Fm(5.)46 b(V)m(iews)3499
b Fo(14)208 162 y Fh(import)38 b(ast.*;)208 266 y(...)208
370 y(M.sexpr)g(sexpr;)208 474 y(switch\(M.sexpr.kind\(\)\))i({)284
578 y(case)e(M.sexpr.Int_kind:)i({)627 682 y(M.Int)e(x)h(=)f(\(M.Int\))
h(sexpr;)627 786 y(/*)f(access)h(the)f(fields)h(through)g(x)f(*/)284
890 y(})76 b(break;)284 995 y(case)38 b(M.sexpr.String_kind:)j({)627
1099 y(M.String)e(x)f(=)g(\(M.String\))h(sexpr;)627 1203
y(/*)f(access)h(the)f(fields)h(through)g(x)f(*/)284 1307
y(})76 b(break;)246 1411 y(...)284 1515 y(case)38 b(M.sexpr.Cons_kind:)
i({)627 1619 y(M.Cons)e(x)h(=)f(\(M.Cons\))h(sexpr;)627
1723 y(/*)f(access)h(the)f(fields)h(through)g(x)f(*/)284
1827 y(})76 b(break;)208 2036 y(})0 2259 y Fo(A)27 b(series)g(of)f
Fl(instanceof)p Fo(')-5 b(s)31 b(in)26 b(a)h(chain)f(if)g(then)g(else')
-5 b(s)28 b(w)o(ould)d(w)o(ork)h(also,)i(b)n(ut)e(this)h(switch)g
(statement)f(is)h(lik)o(ely)f(to)h(be)f(f)o(aster)-5
b(.)0 2372 y(Unlik)o(e)25 b(the)h(C)g(v)o(ersion)f(this)h(idiom)e(does)
i(not)f(enforce)f(a)i(read)f(only)g(discipline)g(since)g(all)h(object)f
(types)h(are)f(reference)f(types)h(in)0 2486 y(Ja)n(v)n(a.)0
2642 y(F)o(or)30 b(sum)h(types)g(which)f(ha)n(v)o(e)g(been)g(treated)g
(as)h(enumerations)e(3.3.3)g(\(Sum)h(T)-7 b(ypes)31 b(as)g
(Enumerations\))e(the)h(idioms)h(are)f(a)h(bit)0 2756
y(dif)n(ferent)19 b(for)g(C)i(code.)j(In)c(particular)f(rather)h(than)f
(switching)h(on)g Fl(var-)p Fc(>)p Fl(kind)j Fo(in)d(one)g(w)o(ould)f
(switch)i(on)e Fl(var)p Fo(.)0 3100 y Fn(5)119 b(V)l(iews)0
3342 y Fo(V)-5 b(ie)n(ws)21 b(pro)o(vide)e(a)j(general)d(mechanism)h
(to)h(customize)f(the)h(output)f(of)g Fl(asdlGen)p Fo(.)30
b(V)-5 b(ie)n(ws)22 b(allo)n(w)e(description)g(writers)h(to)g(annotate)
0 3456 y(modules,)27 b(constructors,)g(and)g(types)f(with)i(directi)n
(v)o(es)e(or)g(properties)g(that)h(are)g(interpreted)e(by)i
Fl(asdlGen)p Fo(.)48 b(Currently)26 b Fl(asdlGen)0 3569
y Fo(properties)19 b(that)h(allo)n(w)g(for)g(the)125
3792 y Fj(\017)41 b Fo(Inclusion)18 b(of)i(arbitrary)f(user)h(code)f
(in)i(the)f(resulting)f(output)125 3972 y Fj(\017)41
b Fo(Automatic)19 b(coercion)f(of)i(speci\002c)h(types)f(into)g(more)f
(ef)n(\002cient)h(user)g(de\002ned)f(representations)125
4152 y Fj(\017)41 b Fo(Addition)19 b(of)g(e)o(xtra)h(user)g(de\002ned)f
(attrib)n(utes)h(and)g(initialization)f(code)125 4332
y Fj(\017)41 b Fo(Specialized)19 b(user)h(de\002ned)f(routines)h(to)g
(read)g(and)f(write)i(data)f(structures)f(to)h(disk)125
4512 y Fj(\017)41 b Fo(Control)20 b(o)o(v)o(er)f(ho)n(w)h(the)h(names)f
(of)h(types,)f(constructors,)f(and)i(modules)e(names)i(are)f(mapped)g
(into)g(the)h(output)e(language)g(to)208 4626 y(resolv)o(e)g(style)h
(issues)i(and)d(name)h(space)g(con\003icts.)125 4806
y Fj(\017)41 b Fo(Control)19 b(o)o(v)o(er)g(the)h(tag)g(v)n(alues)125
4986 y Fj(\017)41 b Fo(Addition)19 b(of)g(documentation)f(that)i
(describes)g(the)g(meaning)f(of)g(types)h(constructors)f(and)h(modules)
p eop
%%Page: 15 15
15 14 bop 0 -167 3900 5 v 0 -200 a Fm(5.)46 b(V)m(iews)3499
b Fo(15)0 162 y Ff(5.1)99 b(Inter)o(pr)n(etation)27 b(of)e(V)l(iew)g
(Entry)h(V)-9 b(alues)0 374 y Fo(See)21 b(the)g(section)f(on)h(3)g
(\(Input)e(Syntax\))g(for)h(details)i(on)e(vie)n(w)g(the)h(syntax)f
(and)g(some)h(basic)g(vie)n(w)g(terminology)-5 b(.)23
b(The)e(vie)n(w)f(syntax)0 488 y(associates)f(an)f(arbitrary)f(string)h
(whose)g(interpretation)e(depends)h(on)h(the)h(property)d(it)j(is)g
(assigned)f(too.)24 b(Currently)17 b(there)h(is)h(a)g(small)0
601 y(set)i(of)f(standard)f(interpretations.)0 841 y
Fm(integer)208 988 y Fo(An)h(inte)o(gral)f(number)f(in)j(decimal)e
(notation.)0 1168 y Fm(string)208 1314 y Fo(A)h(ra)o(w)g(string.)0
1494 y Fm(boolean)208 1641 y Fo(A)g(boolean)f(v)n(alue)g(either)h(")p
Fl(true)p Fo(")i(or)e(")p Fl(false)p Fo(".)0 1821 y Fm(quali\002ed)h
(identi\002er)208 1968 y Fo(A)f(possibly)f(quali\002ed)g(identi\002er)
-5 b(.)25 b(F)o(or)19 b(e)o(xample)f(")p Fl(M.t)p Fo(")j(or)f(")p
Fl(t)p Fo(".)25 b(Quali\002ed)20 b(identi\002ers)f(are)h(language)e
(independent)f(identi-)208 2082 y(\002ers)22 b(that)f(are)h(translated)
e(to)i(the)g(appropriate)d(output)h(language)g(in)h(a)h(uniform)e(w)o
(ay)-5 b(.)28 b(F)o(or)22 b(e)o(xample)e Fl(M.t)j Fo(w)o(ould)e(appear)
f(as)208 2195 y Fl(M_t)h Fo(in)g(C)g(and)e(C++)i(b)n(ut)f(remain)g
Fl(M.t)i Fo(in)e(SML,)g(Ja)n(v)n(a,)g(and)g(Hask)o(ell.)0
2492 y Ff(5.2)99 b(Adding)26 b(User)f(Code)0 2704 y Fo(It)g(is)g
(useful)f(to)h(be)f(able)h(to)f(add)g(arbitrary)f(user)h(code)g(to)h
(the)f(modules)g(produced)e(by)i Fl(asdlGen)p Fo(.)41
b(Modules)23 b(ha)n(v)o(e)h(six)h(properties)0 2818 y(that)20
b(can)g(be)g(set)h(to)g(allo)n(w)f(the)g(addition)f(of)h(user)g(code.)k
(strings.)0 3057 y Fe(interface_prologue)208 3204 y Fo(Include)c(te)o
(xt)h(v)o(erbatim)f(after)h(the)g(introduction)e(of)i(the)h(base)f(en)m
(vironment,)e(b)n(ut)i(before)f(an)o(y)h(type)g(de\002ned)f(in)i(the)f
(module)208 3318 y(interf)o(ace.)0 3498 y Fe(interface_epilogue)208
3645 y Fo(Include)d(te)o(xt)i(v)o(erbatim)f(after)h(all)h(types)f
(de\002ned)f(in)h(the)g(module)f(interf)o(ace)g(ha)n(v)o(e)h(been)g
(de\002ned.)0 3825 y Fe(implementation_prologue)208 3971
y Fo(Include)f(te)o(xt)j(v)o(erbatim)d(after)i(the)g(introduction)e(of)
i(the)h(base)f(en)m(vironment,)d(b)n(ut)j(before)f(an)o(y)h(other)f
(implementation)f(code)208 4085 y(is)i(de\002ned.)0 4265
y Fe(implementation_epilogue)208 4412 y Fo(Include)d(te)o(xt)i(v)o
(erbatim)f(after)h(all)h(de\002nitions)e(de\002ned)g(in)h(the)h(module)
e(implementation.)0 4592 y Fe(suppress)208 4739 y Fo(Def)o(ault)g(v)n
(alue)h(is)g(f)o(alse.)26 b(Do)20 b(not)f(produce)f(an)o(y)h(code)h
(for)f(this)i(module,)d(assume)i(it')-5 b(s)21 b(implementation)d(is)j
(written)e(by)h(hand.)208 4852 y(It')-5 b(s)22 b(often)e(a)i(good)e
(idea)h(to)g(\002rst)i(generate)d(code)g(and)h(then)g(set)h(the)f
(\003ag,)h(so)g(the)f(generated)e(code)i(can)g(be)g(used)h(as)g(stubs)f
(for)208 4966 y(the)f(user)g(implementation.)0 5146 y
Fe(is_library)208 5292 y Fo(Def)o(ault)25 b(v)n(alue)h(is)h(f)o(alse.)
44 b(If)26 b(true)g(assume)g(all)h(types)f(can)g(be)g(used)g(as)h
(lists)g(or)f(options)g(and)f(generate)g(an)o(y)h(needed)e(code,)208
5406 y(rather)19 b(then)h(generating)e(list)j(and)f(option)f(code)g(on)
h(demand.)j(Useful)d(for)g(generating)e(stubs.)p eop
%%Page: 16 16
16 15 bop 0 -167 3900 5 v 0 -200 a Fm(5.)46 b(V)m(iews)3499
b Fo(16)0 162 y(The)20 b(precise)g(meaning)e(of)i(interf)o(ace)g(and)f
(implementation)f(for)i(the)g(dif)n(ferent)f(languages)f(is)j(as)g
(follo)n(ws)0 385 y Fm(C)208 531 y Fo(The)e(interf)o(ace)h(is)h(the)f
Fl(.h)i Fo(\002le)e(and)g(the)g(implementation)e(is)j(the)g
Fl(.c)g Fo(\002le.)0 711 y Fm(C++)208 858 y Fo(The)e(interf)o(ace)h(is)
h(the)f Fl(.hxx)i Fo(\002le)f(and)f(the)g(implementation)e(is)j(the)f
Fl(.cxx)i Fo(\002le.)0 1038 y Fm(J)o(a)n(v)o(a)208 1185
y Fo(Ja)n(v)n(a)54 b(has)h(no)f(notion)f(of)h(interf)o(aces)g(so)h
(this)g(property)d(is)k(ignored.)126 b(The)54 b Fl
(implementation_prolo)q(gue)62 b Fo(is)208 1298 y(placed)44
b(outside)h(the)g(class)h(de\002nition)e(of)h(a)h(Ja)n(v)n(a)g(class)g
(that)f(contains)g(package)f(wide)h(global)f(constants.)100
b(The)208 1412 y Fl(implementation_epilog)q(ue)36 b Fo(is)31
b(placed)e(inside)g(the)h(class)g(de\002nition)f(of)g(a)h(Ja)n(v)n(a)g
(class)g(that)g(contains)f(package)f(wide)208 1526 y(global)19
b(constants.)0 1706 y Fm(ML)208 1852 y Fo(The)g(interf)o(ace)h(is)h
(the)f(generated)f(signature)g(the)h(implementation)e(is)j(the)f
(structure.)0 2032 y Fm(Hask)o(ell)208 2179 y Fo(The)f(interf)o(ace)h
(is)h(the)f(e)o(xport)f(list)i(of)f(the)g(module.)k(The)c
(implementation)d(is)22 b(the)e(module)f(body)-5 b(.)0
2476 y Ff(5.3)99 b(Other)26 b(Pr)n(operties)0 2679 y
Fe(doc_string)208 2826 y Fo(All)21 b(entities)f(ha)n(v)o(e)g(this)h
(property)-5 b(.)23 b(Its)d(v)n(alue)g(is)h(interpreted)e(as)i(a)g
(string.)k(Currently)19 b(only)g(the)h Fl(-doc)j Fo(command)18
b(recognizes)208 2939 y(the)i(property)-5 b(.)22 b(It)f(includes)e(the)
h(property)e(v)n(alue)i(in)g(the)g(HTML)g(documentation)e(produced)f
(for)j(the)g(module.)0 3119 y Fe(source_name)208 3266
y Fo(All)32 b(entities)h(ha)n(v)o(e)f(this)g(property)-5
b(.)59 b(The)32 b(v)n(alue)f(is)i(interpreted)e(as)i(a)f(string.)61
b(Choose)32 b(a)g(dif)n(ferent)f(name)g(for)h(the)g(type)208
3380 y(constructor)22 b(or)h(module)g(in)h(the)g(output)f(code.)35
b(The)24 b(name)f(has)h(no)g(case)g(restrictions.)36
b(This)24 b(is)h(particularly)d(useful)h(when)208 3493
y(producing)16 b(Ja)n(v)n(a)k(code)e(on)h(W)m(indo)n(ws)g(NT/95)g
(since)g(the)h(\002le)g(system)f(is)h(case)g(insensiti)n(v)o(e)f(and)g
(types)g(and)g(constructors)e(that)208 3607 y(dif)n(fer)i(only)g(in)h
(case)h(will)g(cause)f(problems.)0 3787 y Fe(user_attribute)208
3933 y Fo(Property)25 b(of)i(types)f(only)-5 b(.)44 b(The)27
b(v)n(alue)f(is)i(interpreted)d(as)j(a)f(quali\002ed)f(identi\002er)-5
b(.)45 b(Add)26 b(a)i(\002eld)f(called)g Fl(client_data)k
Fo(as)208 4047 y(an)25 b(attrib)n(ute)g(to)h(the)f(type.)40
b(The)25 b(v)n(alue)g(is)i(the)e(quali\002ed)g(identi\002er)f(that)i
(represents)e(an)i(arbitrary)e(user)h(type)g(of)g(the)h(\002eld.)208
4161 y(The)e Fl(client_data)30 b Fo(\002eld)25 b(is)h(ignored)e(by)h
(the)g(pickling)f(code)g(and)h(does)g(not)g(appear)f(in)h
(constructors.)38 b(This)26 b(property)d(is)208 4274
y(currently)18 b(only)h(recognized)f(when)i(outputting)e(C.)0
4454 y Fe(user_init)208 4601 y Fo(Property)h(of)h(types)g(only)-5
b(.)25 b(The)20 b(v)n(alue)g(is)h(interpreted)e(as)i(a)g(quali\002ed)f
(identi\002er)-5 b(.)26 b(Call)21 b(the)g(function)d(speci\002ed)j(by)f
(the)g(v)n(alue)208 4715 y(before)15 b(returning)f(a)j(the)g(data)g
(structure)e(created)h(by)g(a)h(constructor)e(function.)22
b(This)17 b(property)d(is)k(currently)d(only)h(recognized)208
4828 y(when)j(outputting)f(C.)0 5008 y Fe(base_class)208
5155 y Fo(Property)j(of)i(types)h(only)-5 b(.)33 b(The)23
b(v)n(alue)f(is)j(interpreted)c(as)j(a)g(quali\002ed)e(identi\002er)-5
b(.)35 b(The)23 b(name)f(of)h(the)h(class)g(from)e(which)h(all)208
5268 y(classes)g(generated)d(for)h(that)h(type)g(should)e(inherit)i
(from.)29 b(This)22 b(property)e(is)j(recognized)c(only)i(when)h
(outputting)e(C++)i(and)208 5382 y(Ja)n(v)n(a.)p eop
%%Page: 17 17
17 16 bop 0 -167 3900 5 v 0 -200 a Fm(5.)46 b(V)m(iews)3499
b Fo(17)0 162 y Fe(reader)208 308 y Fo(Property)24 b(of)i(types)g(only)
-5 b(.)41 b(The)26 b(v)n(alue)f(is)i(interpreted)e(as)i(a)f
(quali\002ed)f(identi\002er)-5 b(.)43 b(Replace)26 b(the)g(body)f(of)g
(the)i(read)e(pickle)208 422 y(function)18 b(for)i(this)g(type)g(with)g
(a)h(call)g(to)f(a)h(function)d(with)i(the)h(proper)d(ar)o(guments.)0
602 y Fe(writer)208 749 y Fo(Property)k(of)h(types)g(only)-5
b(.)34 b(The)23 b(v)n(alue)g(is)i(interpreted)d(as)i(a)g(quali\002ed)f
(identi\002er)-5 b(.)34 b(Replace)24 b(the)g(body)e(of)h(the)h(writer)f
(pickle)208 862 y(function)18 b(for)i(this)g(type)g(with)g(a)h(call)g
(to)f(a)h(function)d(with)i(the)h(proper)d(ar)o(guments.)0
1042 y Fe(enum_value)208 1189 y Fo(Property)g(of)i(constructors)f(only)
-5 b(.)24 b(The)c(v)n(alue)g(is)h(interpreted)e(as)i(an)f(inte)o(ger)-5
b(.)25 b(Use)c(this)g(inte)o(ger)e(v)n(alue)h(as)h(the)f
Fl(internal)k Fo(tag)208 1303 y(v)n(alue)g(for)g(the)h(constructor)-5
b(.)37 b(The)24 b(e)o(xternal)g(pickle)g(tag)h(remains)f(unchanged.)36
b(This)24 b(property)f(is)j(recognized)c(only)i(when)208
1416 y(outputting)18 b(C,)j(C++,)f(and)g(Ja)n(v)n(a.)0
1713 y Ff(5.4)99 b(Choosing)25 b(a)f(Differ)n(ent)j(Repr)n(esentation)
208 1906 y Fh(module)38 b(IntMap)h({)284 2011 y(int_map)g(=)f(\(int)g
(size,entries)i(map\))284 2115 y(entries)f(=)f(\(entry*)h(entries\))284
2219 y(entry)115 b(=)38 b(\(int)g(key,)h(int)f(value\))208
2323 y(})0 2562 y Fo(The)24 b(abo)o(v)o(e)f(is)j(one)e(possible)g
(abstract)h(description)e(of)h(a)h(mapping)e(from)h(inte)o(gers)g(to)g
(inte)o(gers.)38 b(It)25 b(w)o(ould)f(be)g(more)g(ef)n(\002cient)g(to)0
2676 y Fk(implement)d Fo(such)f(a)h(mapping)d(as)j(a)g(binary)d(tree.)
25 b(Described)20 b(as)h(with)f(the)g(ASDL)h(de\002nition)e(belo)n(w)-5
b(.)208 2889 y Fh(module)38 b(IntMap)h({)284 2994 y(int_map)g(=)f
(\(size)g(int,map)h(tree\))398 3098 y(tree)g(=)f(Node\(int)h(key,int)g
(value,tree)g(left,tree)g(right\))589 3202 y(|)f(Empty)208
3306 y(})0 3529 y Fo(Although)21 b(this)i(is)g(a)g(much)e(more)h(ef)n
(\002cient)g(representation)e(it)k(e)o(xposes)d(implementation)f
(details.)32 b(If)23 b(we)g(decided)e(to)h(change)g(the)0
3642 y(implementation)c(of)i Fl(int_maps)j Fo(to)e(use)f(a)h(hash)f
(table)g(the)g(all)h(other)e(clients)i(that)f(use)g(our)g(type)g(will)g
(ha)n(v)o(e)g(to)g(be)h(updated.)0 3799 y(The)g(vie)n(w)f(properties)g
Fl(natural_type)p Fo(,)25 b Fl(natural_type_con)p Fo(,)i
Fl(wrapper)p Fo(,)d(and)c Fl(unwrapper)25 b Fo(pro)o(vide)19
b(a)i(general)f(mechanism)f(to)0 3912 y(choose)f(a)h(dif)n(ferent)e
(more)h(ef)n(\002cient)g(representation)f(through)f(coercion)h
(functions.)23 b(All)d(of)e(these)h(properties)e(apply)h(to)h(types)f
(only)0 4026 y(and)i(are)g(interpreted)e(as)j(quali\002ed)e
(identi\002ers.)0 4265 y Fe(natural_type)208 4412 y Fo(The)g(type)h(to)
g(use)h(in)f(place)g(of)g(the)g(original)f(type)h(in)g(all)h(the)f
(resulting)g(code.)k(Supported)18 b(by)i(all)h(output)e(languages.)0
4592 y Fe(natural_type_con)208 4739 y Fo(A)f(unary)g(type)f
(constructor)g(to)i(apply)e(to)i(the)f(old)g(type)g(to)h(get)f(a)h(ne)n
(w)f(type)g(to)h(use)f(in)h(all)g(the)f(resulting)g(code.)24
b(e.g.)g(ref)18 b(in)g(ML)208 4853 y(to)23 b(mak)o(e)f(a)i(type)e
(mutable.)33 b(Supported)20 b(by)j(ML)g(and)g(Hask)o(ell.)33
b Fk(Support)22 b(for)h(C++)h(templates)f(will)h(be)f(added)f(in)h(the)
g(near)208 4966 y(futur)m(e)o(.)0 5146 y Fe(wrapper)208
5293 y Fo(A)d(function)f(to)h(con)m(v)o(ert)e(the)i(ne)n(w)g(type)g(to)
g(the)h(old)f(type)f(when)h(writing)f(the)i(pickle.)j(Supported)18
b(by)i(all)h(output)e(languages.)p eop
%%Page: 18 18
18 17 bop 0 -167 3900 5 v 0 -200 a Fm(5.)46 b(V)m(iews)3499
b Fo(18)0 162 y Fe(unwrapper)208 308 y Fo(A)20 b(function)f(to)h(con)m
(v)o(ert)e(the)i(old)g(type)g(to)g(the)h(ne)n(w)f(type)f(when)h
(reading)f(the)h(pickle.)k(Supported)18 b(by)i(all)h(output)e
(languages.)0 548 y(When)f(using)g Fl(natural_type)23
b Fo(and)18 b Fl(natural_type_con)25 b Fo(the)18 b(automatically)f
(generated)g(type)h(de\002nitions)f(for)h(the)h(original)e(type)0
662 y(still)h(remain,)e(b)n(ut)h(all)g(other)f(references)f(to)i(the)f
(original)g(type)g(in)h(constructors,)e(picklers,)i(and)f(other)g(type)
g(de\002nitions)g(that)g(referred)0 775 y(to)24 b(it)g(are)g(replaced)e
(with)i(the)g(ne)n(w)f(type.)35 b(The)23 b(original)g(de\002nition)f
(must)i(remain)e(to)i(support)f(pickling)f(of)h(the)h(type.)35
b(Pickling)23 b(is)0 889 y(achie)n(v)o(ed)f(by)h(appropriately)e
(coercing)i(the)g(ne)n(w)h(type)f(to)h(the)g(old)f(type)h(and)f(vice)g
(v)o(ersa)h(with)g(functions)e(speci\002ed)h(by)h Fl(wrapper)0
1002 y Fo(and)c Fl(unwrapper)j Fo(properties.)0 1280
y Fm(5.4.1)81 b(Examples)0 1493 y Fk(Need)20 b(mor)m(e)h(e)n(xamples)
208 1706 y Fh(module)38 b(Slp)h({)246 1914 y(real)f(=)g(\(int)h
(mantissa,)g(int)f(exp\))208 2018 y(...)284 2123 y(exp)g(=)g
(Id\(identifier)i(id\))436 2227 y(|)e(Num\(int)h(v\))436
2331 y(|)f(Op\(exp)h(lexp,binop?,exp)h(rexp\))474 2435
y(attributes)f(\(real?)g(value\))208 2539 y(...)208 2747
y(})208 2955 y(view)f(C)g({)208 3164 y(--)g(represent)h(reals)g(as)f(a)
g(double)284 3372 y(Slp.exp)h(<=)f({)322 3476 y(natural_type)h(:)f
(my_real)322 3580 y(wrapper)229 b(:)38 b(real2my_real)322
3684 y(unwrapper)153 b(:)38 b(my_real2real)284 3788 y(})284
3996 y(module)h(Slp)f(<=)g({)284 4101 y(interface_epilogue)i(:)e
(typedef)h(double)g(my_real_ty)284 4309 y(implementation_prologue)208
4413 y(\045\045)284 4517 y(my_real_ty)g(real2my_real\(Slp_real_ty)i
(x\))d({)360 4621 y(/*)g(hairy)h(code)f(to)h(actually)g(do)f(this)h(*/)
284 4725 y(})284 4933 y(Slp_real_ty)g(my_real2real\(my_real_ty)i(x\))d
({)360 5038 y(/*)g(hairy)h(code)f(to)h(actually)g(do)f(this)h(*/)284
5142 y(})208 5246 y(\045\045)284 5350 y(})p eop
%%Page: 19 19
19 18 bop 0 -167 3900 5 v 0 -200 a Fm(6.)46 b(Pickles)3459
b Fo(19)208 162 y Fh(})208 370 y(view)38 b(SML)h({)322
474 y(--)f(unpickle)h(exp)g(trees)f(as)h(a)f(mutable)h(type)360
578 y(Slp.exp)g(<=)f({)474 682 y(natural_type_con)i(:)e(ref)474
786 y(wrapper)382 b(:)38 b(!)474 890 y(unwrapper)306
b(:)38 b(ref)360 995 y(})208 1203 y(})0 1547 y Fn(6)119
b(Pickles)0 1789 y Fo(One)21 b(of)g(the)h(most)f(important)f(features)h
(of)g Fl(asdlGen)j Fo(is)f(that)e(it)h(automatically)e(produces)g
(functions)g(that)h(can)g(read)g(and)g(write)h(the)0
1903 y(data)27 b(structures)f(it)i(generates)e(to)h(and)f(from)g(a)i
(platform)d(and)i(language)e(independent)f(e)o(xternal)i
(representation.)43 b(This)27 b(process)0 2016 y(of)c(con)m(v)o(erting)
d(data)k(structures)e(in)i(memory)d(into)i(a)h(sequence)e(of)h(bytes)h
(on)e(the)i(disk)f(is)h(referred)e(to)h(as)h(pickling.)33
b(Since)24 b(from)e(a)0 2130 y(single)g(ASDL)g(speci\002cation)g
Fl(asdlGen)j Fo(produces)20 b(both)i(data)g(structures)f(and)h
(pickling)e(code)i(for)f(C,)i(C++,)g(Ja)n(v)n(a,)g(Standard)e(ML,)0
2243 y(and)f(Hask)o(ell,)g Fl(asdlGen)j Fo(pro)o(vides)c(an)h(easy)g
(and)g(ef)n(\002cient)f(w)o(ay)i(to)f(share)g(comple)o(x)e(data)i
(structures)g(among)f(these)h(languages.)0 2540 y Ff(6.1)99
b(User)25 b(V)l(isible)g(Interface)0 2753 y Fo(As)c(part)f(of)g(the)g
(output)f(code)g(e)n(v)o(ery)g(de\002ned)g(type)h(has)g(a)h
Fl(read)h Fo(and)d Fl(write)k Fo(function)18 b(that)i(writes)h(v)n
(alues)f(of)g(that)g(type)f(to)i(or)f(from)0 2866 y(a)j(stream.)32
b(There)21 b(are)i(also)f Fl(read_tagged)27 b Fo(and)22
b Fl(write_tagged)27 b Fo(functions)21 b(that)i(\002rst)g(output)e(a)i
(unique)e(tag)i(before)e(writing)h(out)0 2980 y(the)e(rest)h(of)f(the)g
(type.)25 b(These)20 b(functions)e(are)j(useful)e(when)h(you)f(e)o
(xpect)g(to)i(write)f(se)n(v)o(eral)g(dif)n(ferent)e(kinds)i(of)g
(pickles)g(to)g(the)g(same)0 3094 y(stream)g(and)g(w)o(ant)g(a)h
(minimal)e(le)n(v)o(el)h(of)g(error)f(checking.)0 3250
y(The)i(ASDL)h(pickle)f(format)f(requires)h(that)h(both)e(the)i(reader)
e(and)h(writer)h(of)f(the)h(pickler)e(agree)h(on)g(the)h(type)f(of)g
(the)h(pickle.)28 b(Other)0 3364 y(than)f(constructor)f(tags)i(for)g
(sum)f(types,)j(there)d(is)i(no)e(e)o(xplicit)g(type)h(information)d
(in)j(the)g(pickle.)47 b(In)28 b(the)f(case)i(of)e(an)h(error)f(the)0
3477 y(beha)n(vior)17 b(is)i(unde\002ned.)k(It)c(is)g(also)g(important)
e(for)h(the)h(streams)f(to)h(be)g(opened)d(in)j(binary)e(mode)h(to)h
(pre)n(v)o(ent)e(line)h(feed)g(translations)0 3591 y(from)h(corrupting)
f(the)i(pickle.)0 3747 y Fk(Plans)g(ar)m(e)g(being)f(made)h(to)g
(support)g(a)g(te)n(xt)h(based)f(pic)n(kle)g(format)g(similar)h(to)f
(XML/SGML)0 4044 y Ff(6.2)99 b(Pr)n(etty)26 b(Printing)f(Pickles)208
4247 y Fh(asdlGen)38 b(-pp_pkl)h([)f(-text)h Fb(j)f Fh(\(-html)h
([-lists)p Fb(j)p Fh(-tables]\))g(])f Fg(file.typ)g(file.pkl)e(type-id)
k Fh(...)0 4486 y Fl(asdlGen)21 b Fo(has)d(an)g(option)f(that)h(will)g
(dump)f(pickles)h(into)f(either)h(a)g(simple)g(te)o(xtual)f(format)g
(or)h(HTML.)f(In)h(order)e(to)i(display)g(a)g(pickle)0
4600 y Fl(asdlGen)24 b Fo(needs)c(to)i(ha)n(v)o(e)e(a)h(description)f
(of)g(the)h(type)g(en)m(vironment)d(and)i(the)h(name)f(of)h(the)g(type)
f(in)h(the)g(pickle.)27 b(A)21 b(description)f(of)0 4713
y(the)i(type)f(en)m(vironment,)e(which)i(produced)f(the)h(pickle,)h(is)
h(obtained)d(by)h(running)f Fl(asdlGen)25 b Fo(with)d(the)g
Fl(-typ)h Fo(option)e(on)g(the)h(set)h(of)0 4827 y(\002les)i(that)f
(describe)g(the)g(modules)f(that)h(produced)e(the)i(code)g(which)f
(produced)f(the)i(pickle.)36 b(The)24 b(resulting)f Fl(env.typ)k
Fo(should)d(be)0 4941 y(the)e(\002rst)g(\002le)g(pro)o(vided)d(to)j
Fl(asdlGen)i Fo(after)e(the)f Fl(-pp_pkl)k Fo(ar)o(gument.)i(The)21
b Fl(-output_file)p Fc(>)26 b Fo(option)20 b(can)h(be)h(use)g(to)f
(change)g(the)0 5054 y(name)c(of)h(the)g(resulting)f(type)g(en)m
(vironment.)k(The)d(\002le)h(that)f(contains)f(the)h(pickle)f(comes)h
(ne)o(xt,)f(and)g(\002nally)h(a)g(list)h(of)f(fully)f(quali\002ed)0
5168 y(type)j(identi\002ers)g(that)g(describe)f(the)h(pickles)g(in)h
(the)f(\002le.)0 5324 y Fk(Pr)l(oduce)f(a)i(type)f(en)m(vir)l(onment)p
eop
%%Page: 20 20
20 19 bop 0 -167 3900 5 v 0 -200 a Fm(6.)46 b(Pickles)3459
b Fo(20)208 162 y Fh(\045)38 b(asdlGen)h(-typ)f(slp.asdl)h
(-output_file=slp.typ)0 363 y Fk(Pr)l(oduce)19 b(a)i(pic)n(kle)f
(\002le)g(called)i Fl(slp.pkl)h Fk(that)d(contains)f
Fl(Slp.exp)k Fk(and)f Fl(Slp.stm)208 565 y Fh(\045)38
b(asdlGen)h(-pp_pkl)f(slp.typ)h(slp.pkl)g(Slp.exp)g(Slp.stm)0
971 y Ff(6.3)99 b(Pickle)25 b(F)n(ormat)f(Details)0 1183
y Fo(The)d(format)g(of)h(the)f(data)h(is)h(described)d(in)i(detail)g
(belo)n(w)f(for)g(description)f(writers)i(that)g(use)g(the)g
Fl(reader)i Fo(and)e Fl(writer)i Fo(properties)0 1297
y(to)c(replace)g(the)g(def)o(ault)f(pickling)g(code)h(for)f(whate)n(v)o
(er)g(reason.)0 1453 y(Since)k(ASDL)h(data)f(structures)g(ha)n(v)o(e)g
(a)g(tree-lik)o(e)g(form,)g(the)o(y)f(can)i(be)f(represented)e
(linearly)i(with)g(a)h(simple)f(pre\002x)g(encoding.)32
b(It)0 1567 y(is)c(easy)e(to)h(generate)e(functions)g(that)i(con)m(v)o
(ert)e(to)h(and)g(from)g(the)h(linear)f(form.)43 b(A)27
b(pre-order)d(w)o(alk)i(of)h(the)f(data)h(structure)e(is)j(all)0
1681 y(that')-5 b(s)24 b(needed.)35 b(The)24 b(w)o(alk)g(is)h
(implemented)d(as)i(recursi)n(v)o(ely)e(de\002ned)h(functions)g(for)g
(each)g(type)h(in)g(an)g(ASDL)g(de\002nition.)35 b(Each)0
1794 y(function)20 b(visits)j(a)f(node)f(of)h(that)g(type)f(and)g
(recursi)n(v)o(ely)f(w)o(alks)i(the)g(rest)h(of)e(the)h(tree.)30
b(Functions)21 b(that)h(write)g(a)g(v)n(alue)f(tak)o(e)h(as)h(their)0
1908 y(\002rst)d(ar)o(gument)d(the)i(v)n(alue)f(to)i(write.)k(The)19
b(second)f(ar)o(gument)f(is)j(the)f(stream)h(that)f(is)h(to)f(be)g
(written)g(to.)25 b(Functions)18 b(that)h(read)g(v)n(alues)0
2021 y(tak)o(e)h(the)g(stream)h(the)o(y)e(are)h(to)g(read)g(the)g(v)n
(alue)g(from)f(as)i(their)f(single)g(ar)o(gument)e(and)h(return)g(the)i
(v)n(alue)e(read.)0 2234 y Fm(int)208 2376 y Fo(Since)g(ASDL)g(inte)o
(gers)f(are)h(intended)f(to)h(be)g(of)g(in\002nite)g(precision)f(the)o
(y)g(are)h(represented)f(with)h(a)g(v)n(ariable-length,)e(signed-)208
2490 y(magnitude)h(encoding.)23 b(The)d(eight)g(bit)h(of)f(each)g(byte)
f(indicates)h(if)h(a)g(gi)n(v)o(en)e(byte)h(is)h(the)f(last)h(byte)f
(of)g(the)h(inte)o(ger)e(encoding.)208 2603 y(The)i(se)n(v)o(enth)f
(bit)h(of)g(the)h(most)f(signi\002cant)g(byte)g(is)h(used)f(to)h
(determine)e(the)h(sign)g(of)g(the)h(v)n(alue.)27 b(Numbers)21
b(in)g(the)h(range)e(of)208 2717 y(-63)j(to)h(63)g(can)g(be)g(encoded)f
(in)h(one)g(byte.)36 b(Numbers)23 b(out)h(of)g(this)h(range)e(require)g
(an)h(e)o(xtra)f(byte)h(for)g(e)n(v)o(ery)f(se)n(v)o(en)g(bits)i(of)208
2830 y(precision)19 b(needed.)k(Bytes)e(are)g(written)f(out)f(in)i
(little-endian)e(order)-5 b(.)24 b(If)c(most)h(inte)o(ger)e(v)n(alues)g
(tend)h(to)h(be)f(v)n(alues)g(near)f(zero,)208 2944 y(this)h(encoding)e
(of)i(inte)o(gers)g(may)f(use)i(less)g(space)f(than)g(a)h(\002x)o(ed)e
(precision)g(representation.)0 3113 y Fm(string)208 3255
y Fo(Strings)i(are)h(represented)e(with)i(a)h(length-header)c(that)j
(describe)f(ho)n(w)g(man)o(y)g(more)g(8-bit)g(bytes)h(follo)n(w)f(for)h
(the)g(string)f(and)208 3368 y(then)27 b(the)h(data)g(for)f(the)h
(string)g(in)g(bytes.)48 b(The)27 b(length-header)e(is)k(encoded)d
(with)i(the)g(same)g(arbitrary)f(precision)g(inte)o(ger)208
3482 y(encoding)18 b(described)h(pre)n(viously)-5 b(.)0
3651 y Fm(identi\002er)208 3793 y Fo(Identi\002ers)19
b(are)h(represented)e(as)j(if)g(the)o(y)e(were)h(strings.)0
3962 y Fm(pr)o(oduct)g(types)208 4104 y Fo(Product)h(types)h(are)g
(represented)e(sequentially)h(without)g(an)o(y)h(tag.)31
b(The)21 b(\002elds)i(of)f(the)g(product)e(type)i(are)g(pack)o(ed)f
(from)g(left)208 4217 y(to)f(right.)0 4387 y Fm(sum)h(types)208
4528 y Fo(Sum)c(types)h(be)o(gin)f(with)h(a)g(unique)f(tag)h(to)g
(identify)f(the)h(constructor)e(follo)n(wed)h(sequentially)f(by)i(the)g
(\002elds)g(of)g(the)g(construc-)208 4642 y(tor)-5 b(.)25
b(T)-7 b(ag)21 b(v)n(alues)f(are)g(assigned)g(based)g(on)g(the)g(order)
f(of)i(constructor)d(de\002nition)h(in)i(the)f(description.)k(The)c
(\002rst)h(constructor)208 4756 y(has)c(a)h(tag)g(v)n(alue)f(of)g(one.)
23 b(Fields)18 b(are)g(pack)o(ed)e(left)i(to)f(right)g(based)g(of)h
(the)f(order)f(in)i(the)g(de\002nition.)k(If)c(there)f(are)g(an)o(y)g
(attrib)n(ute)208 4869 y(v)n(alues)h(associated)g(with)h(the)g(type,)g
(the)o(y)f(are)g(pack)o(ed)g(left)h(to)g(right)f(after)g(the)h(tag)g(b)
n(ut)g(before)e(other)h(constructor)f(\002elds.)25 b(The)208
4983 y(tag)20 b(is)h(encoded)d(with)j(the)f(same)g(arbitrary)f
(precision)g(inte)o(ger)g(encoding)f(described)h(pre)n(viously)-5
b(.)0 5152 y Fm(sequence)21 b(quali\002ed)g(types)208
5294 y Fo(Sequence)i(types)i(are)g(represented)e(with)i(an)g(inte)o
(ger)f(length-header)e(follo)n(wed)h(by)i(that)g(man)o(y)f(v)n(alues)g
(of)h(that)g(type.)39 b(The)208 5407 y(length-header)17
b(is)k(encoded)d(with)j(the)f(same)g(arbitrary)f(precision)g(inte)o
(ger)g(encoding)f(described)h(pre)n(viously)-5 b(.)p
eop
%%Page: 21 21
21 20 bop 0 -167 3900 5 v 0 -200 a Fm(7.)46 b(Support)20
b(Code)3212 b Fo(21)0 162 y Fm(option)20 b(quali\002ed)h(types)208
303 y Fo(Optional)i(v)n(alues)g(are)h(preceded)e(by)h(an)h(inte)o(ger)f
(header)f(that)i(is)h(either)e(one)h(or)f(zero.)36 b(A)24
b(zero)f(indicates)h(that)g(the)f(v)n(alue)h(is)208 417
y(empty)c(\(NONE,)h(nil,)h(or)g(NULL\))f(and)g(no)g(more)g(data)h
(follo)n(ws.)28 b(A)22 b(one)g(indicates)f(that)h(the)f(ne)o(xt)g(v)n
(alue)g(is)i(the)e(v)n(alue)g(of)h(the)208 530 y(optional)c(v)n(alue.)
25 b(The)20 b(header)f(is)i(encoded)d(with)i(the)h(same)f(arbitrary)f
(precision)g(inte)o(ger)g(encoding)f(described)h(pre)n(viously)-5
b(.)0 870 y Fn(7)119 b(Support)32 b(Code)0 1112 y Fk(Needs)16
b(some)f(mor)m(e)h(\003eshing)e(out)j Fo(This)e(section)g(lists)i(the)f
(primiti)n(v)o(e)e(functions)g(and)h(types)g(that)g(are)h(required)d
(for)i(the)g(code)g(produced)0 1226 y(by)20 b Fl(asdlGen)j
Fo(to)d(correctly)f(compile.)24 b(Note)c(this)h(is)g(a)g(language)d
(independent)g(presentation.)0 1518 y Ff(7.1)99 b(Requir)n(ed)27
b(f)n(or)d(All)h(Languages)0 1730 y Fo(All)c(languages)e(require)f(the)
j(follo)n(wing)0 1932 y Fm(instr)o(eam)f(outstr)o(eam)208
2074 y Fo(The)f(input)h(and)f(output)g(stream)i(that)f(the)g(reader)f
(and)h(writer)g(functions)f(e)o(xpect.)0 2243 y Fm(int)208
2385 y Fo(The)g(type)h(of)g(inte)o(gers,)f(possibly)h(a)g("bignum")f
(type.)0 2554 y Fm(string)208 2696 y Fo(The)g(type)h(of)g(strings)0
2865 y Fm(identi\002er)208 3007 y Fo(The)f(type)h(of)g(identi\002ers)0
3176 y Fm(r)o(ead_tag)e(write_tag)208 3318 y Fo(Read)31
b(and)g(write)h(a)g(constructor)e(and)h(length)f(tags)i(out)f(in)h
(ASDL)g(inte)o(ger)f(format.)57 b(Both)32 b(should)f(use)g(the)h
(languages)208 3431 y(standard)19 b(inte)o(ger)g(types)h(rather)f(than)
h(a)g("bignum")f(types.)0 3601 y Fm(r)o(ead_int)g(write_int)208
3742 y Fo(Read)h(and)g(write)g(the)g Fm(int)h Fo(type)e(out)h(in)h
(ASDL)f(inte)o(ger)f(format.)0 3912 y Fm(r)o(ead_string)g(write_string)
208 4053 y Fo(Read)h(and)g(write)g(the)g Fm(string)g
Fo(type)g(out)g(in)g(the)h(ASDL)f(string)g(format.)0
4223 y Fm(r)o(ead_identi\002er)f(write_identi\002er)208
4364 y Fo(Read)h(and)g(write)g(the)g Fm(identi\002er)h
Fo(type)e(out)h(in)h(the)f(ASDL)g(identi\002er)g(format.)0
4534 y Fm(die)208 4675 y Fo(Signal)g(a)g(f)o(atal)h(error)-5
b(.)0 4968 y Ff(7.2)99 b(BigNums)0 5180 y Fo(C)21 b(and)f(SML)h(ha)n(v)
o(e)f(libraries)g(that)h(use)g(a)f(bignum)f(type)h(rather)g(than)g(the)
h(a)f(\002xnum)g(for)g(the)g(ASDL)h(int)g(type.)k(T)-7
b(o)21 b(ha)n(v)o(e)f(the)g(int)h(type)0 5294 y(be)c(a)g(bignum)f(in)h
(C)h(use)f(the)g(\003ag)g Fl(-base_include)47 b(cii_big_base.h)p
Fo(.)29 b(In)16 b(SML)i(the)f(\003ags)g(are)g Fl(-base_signature)47
b(BIG_BASE)0 5407 y Fo(and)20 b Fl(-base_structure)47
b(BigBase)p Fo(.)p eop
%%Page: 22 22
22 21 bop 0 -167 3900 5 v 0 -200 a Fm(7.)46 b(Support)20
b(Code)3212 b Fo(22)0 162 y Ff(7.3)99 b(Lists)25 b(and)g(Options)0
374 y Fo(F)o(or)17 b(code)h(that)f(does)h(not)f(use)i(polymorphic)14
b(list)19 b(and)e(option)g(the)h(follo)n(wing)e(e)o(xtra)h(types)h(are)
f(needed)g(along)g(with)h(the)f(correspond-)0 488 y(ing)j(read)f(and)h
(write)g(functions)0 711 y Fm(int_list)g(int_option)208
857 y Fo(The)f(list)j(and)d(option)g(types)h(for)g(inte)o(gers.)0
1037 y Fm(string_list)g(string_option)208 1184 y Fo(The)f(list)j(an)e
(option)f(types)h(for)f(strings.)0 1364 y Fm(identi\002er_list)h
(identi\002er_option)208 1511 y Fo(The)f(list)j(an)e(option)f(types)h
(for)f(identi\002ers.)0 1734 y(F)o(or)h(code)f(that)i(supports)e
(polymorphic)e(list)k(and)f(options)f(the)h(follo)n(wing)f(e)o(xtra)g
(functions)g(are)h(required)0 1973 y Fm(r)o(ead_list)f(write_list)208
2120 y Fo(Functions)k(whose)h(\002rst)h(ar)o(gument)e(is)i(a)g(read)f
(or)g(write)h(function)d(for)i(a)h(speci\002c)g(type)f(that)g(reads)h
(or)f(writes)h(a)g(list)g(of)f(that)208 2234 y(type.)0
2414 y Fm(r)o(ead_option)18 b(write_option)208 2561 y
Fo(Functions)g(whose)h(\002rst)h(ar)o(gument)d(is)j(a)f(read)g(or)g
(write)g(function)f(for)g(a)i(speci\002c)f(type)g(that)g(reads)g(or)g
(writes)h(a)g(option)e(of)g(that)208 2674 y(type.)0 2971
y Ff(7.4)99 b(Note)25 b(about)h Fa(-mono_types=false)21
b Ff(f)n(or)j(C)0 3183 y Fo(F)o(or)d(the)h Fl(-mono_types)46
b(false)24 b Fo(option)d(in)h(C)h(these)f(function)e(e)o(xpect)g
(functions)h(pointers)g(that)h(correspond)d(to)j(the)f(follo)n(wing)g
(C)0 3297 y Fl(typedefs)208 3510 y Fh(typedef)38 b(void)h
(*\(*generic_reader_ty\)\(instream_ty)j(s\);)208 3615
y(typedef)c(void)h(\(*generic_writer_ty\)\(void)i(*x,outstream_ty)e
(s\);)0 3837 y Fo(Function)27 b(pointer)g(with)i(dif)n(ferent)d(ar)o
(gument)g(types)i(are)g(distinct)h(types)f(in)g(C)h(that)g(can)f(not)g
(be)g(safely)g(cast)h(between)e(because)0 3951 y(the)o(y)32
b(may)g(dif)n(fer)f(in)i(calling)f(con)m(v)o(entions.)59
b Fl(asdlGen)36 b Fo(solv)o(es)c(this)h(problem)e(by)h(automatically)f
(generating)g(function)f(stubs)0 4065 y(that)c(internally)f(cast)i(the)
f Fl(void*)i Fo(pointers)d(for)h(each)g(option)e(and)i(list)h(type.)42
b(These)26 b(reader)f(and)h(writer)g(functions)e(are)i(pre\002x)o(ed)0
4178 y Fl(generic_)p Fo(.)i(There)20 b(also)g(should)f(be)h
Fl(list_ty)k Fo(and)19 b Fl(opt_ty)k Fo(typedefs.)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
